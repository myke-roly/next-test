{"ast":null,"code":"import _Object$defineProperty from \"@babel/runtime-corejs2/core-js/object/define-property\";\nimport _Object$defineProperties from \"@babel/runtime-corejs2/core-js/object/define-properties\";\nimport _Object$getOwnPropertyDescriptors from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors\";\nimport _Object$getOwnPropertyDescriptor from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor\";\nimport _Object$getOwnPropertySymbols from \"@babel/runtime-corejs2/core-js/object/get-own-property-symbols\";\nimport _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = _Object$keys(object); if (_Object$getOwnPropertySymbols) { var symbols = _Object$getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return _Object$getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (_Object$getOwnPropertyDescriptors) { _Object$defineProperties(target, _Object$getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { _Object$defineProperty(target, key, _Object$getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { useState, useEffect } from 'react';\nimport Layout from '../components/MyLayout';\nimport Head from 'next/head';\nimport fetch from 'isomorphic-unfetch';\nimport axios from 'axios';\n\nvar CustomServer = function CustomServer(_ref) {\n  var posts = _ref.posts;\n  console.log(posts);\n\n  var _useState = useState({\n    name: '',\n    email: '',\n    msg: ''\n  }),\n      state = _useState[0],\n      setState = _useState[1];\n\n  var _useState2 = useState([]),\n      data = _useState2[0],\n      setData = _useState2[1];\n\n  useEffect(function () {\n    var getUsers = function getUsers() {\n      var url, response, users;\n      return _regeneratorRuntime.async(function getUsers$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              url = \"\".concat(process.env.URL, \"/api/auth\");\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(fetch('/api/auth'));\n\n            case 3:\n              response = _context.sent;\n              _context.next = 6;\n              return _regeneratorRuntime.awrap(response.json());\n\n            case 6:\n              users = _context.sent;\n              if (response.status === 200) setData(users);\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      });\n    };\n\n    getUsers();\n\n    if (state.msg) {\n      setTimeout(function () {\n        setState({\n          msg: ''\n        });\n      }, 3000);\n    }\n  }, [state.msg]);\n\n  var fetchData = function fetchData() {\n    var name, email, response;\n    return _regeneratorRuntime.async(function fetchData$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            name = state.name, email = state.email;\n\n            if (!(!state.name || !state.email)) {\n              _context2.next = 3;\n              break;\n            }\n\n            return _context2.abrupt(\"return\");\n\n          case 3:\n            _context2.next = 5;\n            return _regeneratorRuntime.awrap(axios.post('/api/auth', {\n              name: name,\n              email: email\n            }));\n\n          case 5:\n            response = _context2.sent;\n            setState({\n              msg: response.data.message\n            });\n\n          case 7:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    });\n  };\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    fetchData();\n    setState({\n      name: '',\n      email: ''\n    });\n  }\n\n  function handleChange(e) {\n    setState(_objectSpread({}, state, _defineProperty({}, e.target.name, e.target.value)));\n  }\n\n  return __jsx(React.Fragment, null, __jsx(Head, null, __jsx(\"title\", null, \"Custom server\"), __jsx(\"meta\", {\n    name: \"description\",\n    content: \"this is a tv route\"\n  })), __jsx(Layout, null, __jsx(\"main\", {\n    className: \"jsx-874386899\"\n  }, __jsx(\"form\", {\n    onSubmit: handleSubmit,\n    className: \"jsx-874386899\"\n  }, __jsx(\"h2\", {\n    className: \"jsx-874386899\"\n  }, \"User List\"), state.msg && __jsx(\"p\", {\n    className: \"jsx-874386899\"\n  }, state.msg), __jsx(\"label\", {\n    htmlFor: \"name\",\n    className: \"jsx-874386899\"\n  }, \"Name: \"), __jsx(\"input\", {\n    type: \"text\",\n    id: \"name\",\n    name: \"name\",\n    value: state.name,\n    onChange: handleChange,\n    placeholder: \"No ingresar datos validos ahre!!\",\n    className: \"jsx-874386899\"\n  }), __jsx(\"label\", {\n    htmlFor: \"email\",\n    className: \"jsx-874386899\"\n  }, \"Email: \"), __jsx(\"input\", {\n    type: \"email\",\n    id: \"email\",\n    name: \"email\",\n    value: state.email,\n    onChange: handleChange,\n    className: \"jsx-874386899\"\n  }), __jsx(\"button\", {\n    type: \"submit\",\n    className: \"jsx-874386899\"\n  }, \"Save data\")), __jsx(\"table\", {\n    border: \"1\",\n    className: \"jsx-874386899\"\n  }, __jsx(\"thead\", {\n    className: \"jsx-874386899\"\n  }, __jsx(\"tr\", {\n    className: \"jsx-874386899\"\n  }, __jsx(\"th\", {\n    className: \"jsx-874386899\"\n  }, \"USERS\"), __jsx(\"th\", {\n    className: \"jsx-874386899\"\n  }, \"@\"))), __jsx(\"tbody\", {\n    className: \"jsx-874386899\"\n  }, data && data.map(function (user) {\n    return __jsx(\"tr\", {\n      key: user._id,\n      className: \"jsx-874386899\"\n    }, __jsx(\"td\", {\n      className: \"jsx-874386899\"\n    }, user.name), __jsx(\"td\", {\n      className: \"jsx-874386899\"\n    }, user.email));\n  })))), __jsx(_JSXStyle, {\n    id: \"874386899\"\n  }, \"main.jsx-874386899{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;font-family:sans-serif;}@media (max-width:720px){main.jsx-874386899{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}}h2.jsx-874386899{color:#555;margin-bottom:1rem;}table.jsx-874386899,form.jsx-874386899{width:100%;margin:2rem auto;background:#000;padding:2rem;border:none;border-radius:5px;}thead.jsx-874386899{background:#222;color:#fff;}tbody.jsx-874386899{background:#dedede;color:#333;}th.jsx-874386899,td.jsx-874386899{border-radius:2px;padding:0.5rem 1rem;border:none;box-shadow:0 0 7px rgba(0,0,0,0.3);}form.jsx-874386899{width:100%;margin:2rem auto;background:#dedede;padding:2rem;}input.jsx-874386899{width:100%;padding:0.7rem 1rem;border:none;border-radius:5px;margin:0.5rem 0;}p.jsx-874386899{color:green;text-transform:uppercase;font-size:1rem;margin:.5rem;text-align:center;}button.jsx-874386899{padding:0.7rem 1rem;background:black;border:none;color:white;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL21pa2UvRGVza3RvcC9sZWFybmluZy9uZXh0anMtdGVzdC9wYWdlcy9jdXN0b20tc2VydmVyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQW9HYSxBQUc4QixBQUtXLEFBSWIsQUFLQSxBQVFLLEFBSUcsQUFLRCxBQU1QLEFBTUEsQUFPQyxBQU9RLFdBL0NELEFBS0YsQUF1QkEsQUFNRyxDQU9LLElBNUJkLEVBU1MsQ0FMVCxDQStCTSxPQWxDbkIsQ0FSa0IsQUF1QkcsRUE1QnJCLEFBaUJBLENBaUJjLE1BT0csQUFPSCxDQTFCQSxLQWFNLENBN0JMLEdBdUJBLEVBb0JELENBMUIwQixFQW1CekIsS0FuQ0QsR0F1QmQsQ0FNa0IsQUFjbEIsSUFQb0IsSUFuQ0EsS0FsQkssR0ErQ3pCLENBMUNFLEtBaURGLEVBcEJBLEVBZkEsVUFsQkEiLCJmaWxlIjoiL2hvbWUvbWlrZS9EZXNrdG9wL2xlYXJuaW5nL25leHRqcy10ZXN0L3BhZ2VzL2N1c3RvbS1zZXJ2ZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IExheW91dCBmcm9tICcuLi9jb21wb25lbnRzL015TGF5b3V0JztcbmltcG9ydCBIZWFkIGZyb20gJ25leHQvaGVhZCc7XG5pbXBvcnQgZmV0Y2ggZnJvbSAnaXNvbW9ycGhpYy11bmZldGNoJztcbmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7XG5cbmNvbnN0IEN1c3RvbVNlcnZlciA9ICh7IHBvc3RzIH0pID0+IHtcblxuICBjb25zb2xlLmxvZyhwb3N0cyk7XG5cbiAgY29uc3QgW3N0YXRlLCBzZXRTdGF0ZV0gPSB1c2VTdGF0ZSh7XG4gICAgbmFtZTogJycsXG4gICAgZW1haWw6ICcnLFxuICAgIG1zZzogJydcbiAgfSk7XG5cbiAgY29uc3QgWyBkYXRhLCBzZXREYXRhIF0gPSB1c2VTdGF0ZShbXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBnZXRVc2VycyA9IGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHVybCA9IGAke3Byb2Nlc3MuZW52LlVSTH0vYXBpL2F1dGhgO1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnL2FwaS9hdXRoJyk7XG4gICAgICBjb25zdCB1c2VycyA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgIGlmKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwKSBzZXREYXRhKHVzZXJzKTtcbiAgICB9XG5cbiAgICBnZXRVc2VycygpO1xuXG4gICAgaWYgKHN0YXRlLm1zZykge1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHNldFN0YXRlKHsgbXNnOiAnJ30pO1xuICAgICAgfSwgMzAwMCk7XG4gICAgfVxuICB9LCBbc3RhdGUubXNnXSk7XG5cbiAgY29uc3QgZmV0Y2hEYXRhID0gYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHsgbmFtZSwgZW1haWwgfSA9IHN0YXRlO1xuICAgIGlmKCFzdGF0ZS5uYW1lIHx8ICFzdGF0ZS5lbWFpbCApIHJldHVybjtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGF4aW9zLnBvc3QoJy9hcGkvYXV0aCcsIHsgbmFtZSwgZW1haWwgfSk7XG4gICAgc2V0U3RhdGUoeyBtc2c6IHJlc3BvbnNlLmRhdGEubWVzc2FnZX0pO1xuICB9O1xuXG4gIGZ1bmN0aW9uIGhhbmRsZVN1Ym1pdChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGZldGNoRGF0YSgpO1xuICAgIHNldFN0YXRlKHsgbmFtZTogJycsIGVtYWlsOiAnJ30pO1xuICB9XG5cbiAgZnVuY3Rpb24gaGFuZGxlQ2hhbmdlKGUpIHtcbiAgICBzZXRTdGF0ZSh7Li4uc3RhdGUsIFtlLnRhcmdldC5uYW1lXTogZS50YXJnZXQudmFsdWUgfSk7XG4gIH1cblxuICByZXR1cm4gKFxuICAgIDw+XG4gICAgICA8SGVhZD5cbiAgICAgICAgPHRpdGxlPkN1c3RvbSBzZXJ2ZXI8L3RpdGxlPlxuICAgICAgICA8bWV0YSBuYW1lPVwiZGVzY3JpcHRpb25cIiBjb250ZW50PVwidGhpcyBpcyBhIHR2IHJvdXRlXCIgLz5cbiAgICAgIDwvSGVhZD5cbiAgICAgIDxMYXlvdXQ+XG4gICAgICAgICAgPG1haW4+XG4gICAgICAgICAgICA8Zm9ybSBvblN1Ym1pdD17aGFuZGxlU3VibWl0fT5cbiAgICAgICAgICAgICAgPGgyPlVzZXIgTGlzdDwvaDI+ICBcbiAgICAgICAgICAgICAge3N0YXRlLm1zZyAmJiA8cD57c3RhdGUubXNnfTwvcD59XG4gICAgICAgICAgICAgIDxsYWJlbCBodG1sRm9yPVwibmFtZVwiPk5hbWU6IDwvbGFiZWw+XG4gICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgICAgICAgICBpZD1cIm5hbWVcIlxuICAgICAgICAgICAgICAgIG5hbWU9XCJuYW1lXCJcbiAgICAgICAgICAgICAgICB2YWx1ZT17c3RhdGUubmFtZX1cbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17aGFuZGxlQ2hhbmdlfVxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiTm8gaW5ncmVzYXIgZGF0b3MgdmFsaWRvcyBhaHJlISFcIlxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8bGFiZWwgaHRtbEZvcj1cImVtYWlsXCI+RW1haWw6IDwvbGFiZWw+XG4gICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgIHR5cGU9XCJlbWFpbFwiXG4gICAgICAgICAgICAgICAgaWQ9XCJlbWFpbFwiXG4gICAgICAgICAgICAgICAgbmFtZT1cImVtYWlsXCJcbiAgICAgICAgICAgICAgICB2YWx1ZT17c3RhdGUuZW1haWx9XG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9e2hhbmRsZUNoYW5nZX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwic3VibWl0XCI+U2F2ZSBkYXRhPC9idXR0b24+XG4gICAgICAgICAgICA8L2Zvcm0+XG4gICAgICAgICAgICA8dGFibGUgYm9yZGVyPVwiMVwiPlxuICAgICAgICAgICAgICA8dGhlYWQ+XG4gICAgICAgICAgICAgICAgPHRyPlxuICAgICAgICAgICAgICAgICAgPHRoPlVTRVJTPC90aD5cbiAgICAgICAgICAgICAgICAgIDx0aD5APC90aD5cbiAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgICA8L3RoZWFkPlxuICAgICAgICAgICAgICA8dGJvZHk+XG4gICAgICAgICAgICAgICAge2RhdGEgJiYgZGF0YS5tYXAoKHVzZXIpID0+IChcbiAgICAgICAgICAgICAgICAgIDx0ciBrZXk9e3VzZXIuX2lkfT5cbiAgICAgICAgICAgICAgICAgICAgPHRkPnt1c2VyLm5hbWV9PC90ZD5cbiAgICAgICAgICAgICAgICAgICAgPHRkPnt1c2VyLmVtYWlsfTwvdGQ+XG4gICAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICA8L3Rib2R5PlxuICAgICAgICAgICAgPC90YWJsZT5cbiAgICAgICAgICA8L21haW4+XG4gICAgICAgICAgPHN0eWxlIGpzeD5cbiAgICAgICAgICAgIHtgXG4gICAgICAgICAgICAgIG1haW4ge1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgICAgZm9udC1mYW1pbHk6IHNhbnMtc2VyaWY7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgQG1lZGlhIChtYXgtd2lkdGg6IDcyMHB4KSB7XG4gICAgICAgICAgICAgICAgbWFpbiB7XG4gICAgICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBoMiB7XG4gICAgICAgICAgICAgICAgY29sb3I6ICM1NTU7IFxuICAgICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDFyZW07XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgdGFibGUsXG4gICAgICAgICAgICAgIGZvcm0ge1xuICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgICAgIG1hcmdpbjogMnJlbSBhdXRvO1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6ICMwMDA7XG4gICAgICAgICAgICAgICAgcGFkZGluZzogMnJlbTtcbiAgICAgICAgICAgICAgICBib3JkZXI6IG5vbmU7XG4gICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNXB4O1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHRoZWFkIHtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAjMjIyO1xuICAgICAgICAgICAgICAgIGNvbG9yOiAjZmZmO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHRib2R5IHtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZGVkZWRlO1xuICAgICAgICAgICAgICAgIGNvbG9yOiAjMzMzO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHRoLFxuICAgICAgICAgICAgICB0ZCB7XG4gICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMnB4O1xuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDAuNXJlbSAxcmVtO1xuICAgICAgICAgICAgICAgIGJvcmRlcjogbm9uZTtcbiAgICAgICAgICAgICAgICBib3gtc2hhZG93OiAwIDAgN3B4IHJnYmEoMCwgMCwgMCwgMC4zKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBmb3JtIHtcbiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgICAgICBtYXJnaW46IDJyZW0gYXV0bztcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZGVkZWRlO1xuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDJyZW07XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaW5wdXQge1xuICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDAuN3JlbSAxcmVtO1xuICAgICAgICAgICAgICAgIGJvcmRlcjogbm9uZTtcbiAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1cHg7XG4gICAgICAgICAgICAgICAgbWFyZ2luOiAwLjVyZW0gMDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBwIHtcbiAgICAgICAgICAgICAgICBjb2xvcjogZ3JlZW47XG4gICAgICAgICAgICAgICAgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTtcbiAgICAgICAgICAgICAgICBmb250LXNpemU6IDFyZW07XG4gICAgICAgICAgICAgICAgbWFyZ2luOiAuNXJlbTtcbiAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgYnV0dG9uIHtcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiAwLjdyZW0gMXJlbTtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiBibGFjaztcbiAgICAgICAgICAgICAgICBib3JkZXI6IG5vbmU7XG4gICAgICAgICAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBgfVxuICAgICAgICAgIDwvc3R5bGU+XG4gICAgICA8L0xheW91dD5cbiAgICA8Lz5cbiAgKTtcbn07XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRTZXJ2ZVNpZGVQcm9wcyggeyBwYXJhbXN9ICkge1xuICBjb25zb2xlLmxvZyhwYXJhbXMpO1xuICBjb25zdCB1cmwgPSBgJHtwcm9jZXNzLmVudi5VUkx9L2FwaS9hdXRoYDtcbiAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9qc29ucGxhY2Vob2xkZXIudHlwaWNvZGUuY29tL3RvZG9zLzEnKTtcbiAgY29uc3QgcG9zdHMgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gIHJldHVybiB7IHByb3BzIDoge1xuICAgIHBvc3RzXG4gIH0gfTtcblxufVxuXG5leHBvcnQgZGVmYXVsdCBDdXN0b21TZXJ2ZXI7XG4iXX0= */\\n/*@ sourceURL=/home/mike/Desktop/learning/nextjs-test/pages/custom-server.js */\")));\n};\n\nexport function getServeSideProps(_ref2) {\n  var params, url, response, posts;\n  return _regeneratorRuntime.async(function getServeSideProps$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          params = _ref2.params;\n          console.log(params);\n          url = \"\".concat(process.env.URL, \"/api/auth\");\n          _context3.next = 5;\n          return _regeneratorRuntime.awrap(fetch('https://jsonplaceholder.typicode.com/todos/1'));\n\n        case 5:\n          response = _context3.sent;\n          _context3.next = 8;\n          return _regeneratorRuntime.awrap(response.json());\n\n        case 8:\n          posts = _context3.sent;\n          return _context3.abrupt(\"return\", {\n            props: {\n              posts: posts\n            }\n          });\n\n        case 10:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  });\n}\nexport default CustomServer;","map":{"version":3,"sources":["/home/mike/Desktop/learning/nextjs-test/pages/custom-server.js"],"names":["useState","useEffect","Layout","Head","fetch","axios","CustomServer","posts","console","log","name","email","msg","state","setState","data","setData","getUsers","url","process","env","URL","response","json","users","status","setTimeout","fetchData","post","message","handleSubmit","e","preventDefault","handleChange","target","value","map","user","_id","getServeSideProps","params","props"],"mappings":"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","sourcesContent":["import { useState, useEffect } from 'react';\nimport Layout from '../components/MyLayout';\nimport Head from 'next/head';\nimport fetch from 'isomorphic-unfetch';\nimport axios from 'axios';\n\nconst CustomServer = ({ posts }) => {\n\n  console.log(posts);\n\n  const [state, setState] = useState({\n    name: '',\n    email: '',\n    msg: ''\n  });\n\n  const [ data, setData ] = useState([]);\n\n  useEffect(() => {\n    const getUsers = async () => {\n      const url = `${process.env.URL}/api/auth`;\n      const response = await fetch('/api/auth');\n      const users = await response.json();\n      if(response.status === 200) setData(users);\n    }\n\n    getUsers();\n\n    if (state.msg) {\n      setTimeout(() => {\n        setState({ msg: ''});\n      }, 3000);\n    }\n  }, [state.msg]);\n\n  const fetchData = async () => {\n    const { name, email } = state;\n    if(!state.name || !state.email ) return;\n    const response = await axios.post('/api/auth', { name, email });\n    setState({ msg: response.data.message});\n  };\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    fetchData();\n    setState({ name: '', email: ''});\n  }\n\n  function handleChange(e) {\n    setState({...state, [e.target.name]: e.target.value });\n  }\n\n  return (\n    <>\n      <Head>\n        <title>Custom server</title>\n        <meta name=\"description\" content=\"this is a tv route\" />\n      </Head>\n      <Layout>\n          <main>\n            <form onSubmit={handleSubmit}>\n              <h2>User List</h2>  \n              {state.msg && <p>{state.msg}</p>}\n              <label htmlFor=\"name\">Name: </label>\n              <input\n                type=\"text\"\n                id=\"name\"\n                name=\"name\"\n                value={state.name}\n                onChange={handleChange}\n                placeholder=\"No ingresar datos validos ahre!!\"\n              />\n              <label htmlFor=\"email\">Email: </label>\n              <input\n                type=\"email\"\n                id=\"email\"\n                name=\"email\"\n                value={state.email}\n                onChange={handleChange}\n              />\n              <button type=\"submit\">Save data</button>\n            </form>\n            <table border=\"1\">\n              <thead>\n                <tr>\n                  <th>USERS</th>\n                  <th>@</th>\n                </tr>\n              </thead>\n              <tbody>\n                {data && data.map((user) => (\n                  <tr key={user._id}>\n                    <td>{user.name}</td>\n                    <td>{user.email}</td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </main>\n          <style jsx>\n            {`\n              main {\n                display: flex;\n                font-family: sans-serif;\n              }\n              @media (max-width: 720px) {\n                main {\n                  flex-direction: column;\n                }\n              }\n              h2 {\n                color: #555; \n                margin-bottom: 1rem;\n              }\n              table,\n              form {\n                width: 100%;\n                margin: 2rem auto;\n                background: #000;\n                padding: 2rem;\n                border: none;\n                border-radius: 5px;\n              }\n              thead {\n                background: #222;\n                color: #fff;\n              }\n              tbody {\n                background: #dedede;\n                color: #333;\n              }\n              th,\n              td {\n                border-radius: 2px;\n                padding: 0.5rem 1rem;\n                border: none;\n                box-shadow: 0 0 7px rgba(0, 0, 0, 0.3);\n              }\n              form {\n                width: 100%;\n                margin: 2rem auto;\n                background: #dedede;\n                padding: 2rem;\n              }\n              input {\n                width: 100%;\n                padding: 0.7rem 1rem;\n                border: none;\n                border-radius: 5px;\n                margin: 0.5rem 0;\n              }\n              p {\n                color: green;\n                text-transform: uppercase;\n                font-size: 1rem;\n                margin: .5rem;\n                text-align: center;\n              }\n              button {\n                padding: 0.7rem 1rem;\n                background: black;\n                border: none;\n                color: white;\n              }\n            `}\n          </style>\n      </Layout>\n    </>\n  );\n};\n\nexport async function getServeSideProps( { params} ) {\n  console.log(params);\n  const url = `${process.env.URL}/api/auth`;\n  const response = await fetch('https://jsonplaceholder.typicode.com/todos/1');\n  const posts = await response.json();\n  return { props : {\n    posts\n  } };\n\n}\n\nexport default CustomServer;\n"]},"metadata":{},"sourceType":"module"}