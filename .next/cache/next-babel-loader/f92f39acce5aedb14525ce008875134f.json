{"ast":null,"code":"import _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { useState, useEffect } from 'react';\nimport Layout from '../components/MyLayout';\nimport Head from 'next/head';\nimport fetch from 'isomorphic-unfetch';\nimport axios from 'axios';\n\nconst CustomServer = () => {\n  const {\n    0: state,\n    1: setState\n  } = useState({\n    name: '',\n    email: '',\n    msg: null\n  });\n  const {\n    0: data,\n    1: setData\n  } = useState([]);\n\n  const getUsers = async () => {\n    const response = await fetch(`${process.env.URL}/api/auth`);\n    const users = await response.json();\n    if (response.status === 200) setData(users);\n  };\n\n  useEffect(() => {\n    getUsers();\n\n    if (state.msg) {\n      setTimeout(() => {\n        setState({\n          msg: ''\n        });\n      }, 3000);\n    }\n  }, [state.msg]);\n\n  const fetchData = async () => {\n    const {\n      name,\n      email\n    } = state;\n    if (!state.name || !state.email) return;\n    const response = await axios.post(`${process.env.URL}/api/auth`, {\n      name,\n      email\n    });\n    setState({\n      msg: response.data.message\n    });\n  };\n\n  const deletedUser = async id => {\n    await axios.delete(`${process.env.URL}/api/auth/${id}`);\n    getUsers();\n  };\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    fetchData();\n    setState({\n      name: '',\n      email: ''\n    });\n  }\n\n  function handleChange(e) {\n    setState(_objectSpread({}, state, {\n      [e.target.name]: e.target.value\n    }));\n  }\n\n  return __jsx(React.Fragment, null, __jsx(Head, null, __jsx(\"title\", null, \"Custom server\"), __jsx(\"meta\", {\n    name: \"description\",\n    content: \"this is a tv route\"\n  })), __jsx(Layout, null, __jsx(\"main\", {\n    className: \"jsx-330897323\"\n  }, __jsx(\"form\", {\n    onSubmit: handleSubmit,\n    className: \"jsx-330897323\"\n  }, __jsx(\"h2\", {\n    className: \"jsx-330897323\"\n  }, \"User List\"), state.msg && __jsx(\"p\", {\n    className: \"jsx-330897323\"\n  }, state.msg), __jsx(\"label\", {\n    htmlFor: \"name\",\n    className: \"jsx-330897323\"\n  }, \"Name: \"), __jsx(\"input\", {\n    type: \"text\",\n    id: \"name\",\n    name: \"name\",\n    value: state.name,\n    onChange: handleChange,\n    placeholder: \"No ingresar datos validos ahre!!\",\n    className: \"jsx-330897323\"\n  }), __jsx(\"label\", {\n    htmlFor: \"email\",\n    className: \"jsx-330897323\"\n  }, \"Email: \"), __jsx(\"input\", {\n    type: \"email\",\n    id: \"email\",\n    name: \"email\",\n    value: state.email,\n    onChange: handleChange,\n    className: \"jsx-330897323\"\n  }), __jsx(\"button\", {\n    type: \"submit\",\n    className: \"jsx-330897323\"\n  }, \"Save data\")), __jsx(\"table\", {\n    border: \"1\",\n    className: \"jsx-330897323\"\n  }, __jsx(\"thead\", {\n    className: \"jsx-330897323\"\n  }, __jsx(\"tr\", {\n    className: \"jsx-330897323\"\n  }, __jsx(\"th\", {\n    className: \"jsx-330897323\"\n  }, \"USERS\"), __jsx(\"th\", {\n    className: \"jsx-330897323\"\n  }, \"@\"))), __jsx(\"tbody\", {\n    className: \"jsx-330897323\"\n  }, data && data.map(user => __jsx(\"tr\", {\n    key: user._id,\n    className: \"jsx-330897323\"\n  }, __jsx(\"td\", {\n    className: \"jsx-330897323\"\n  }, user.name), __jsx(\"td\", {\n    className: \"jsx-330897323\"\n  }, user.email, __jsx(\"button\", {\n    onClick: () => deletedUser(user._id),\n    className: \"jsx-330897323\" + \" \" + \"delete\"\n  }, \"X\"))))))), __jsx(_JSXStyle, {\n    id: \"330897323\"\n  }, \"main.jsx-330897323{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;font-family:sans-serif;}@media (max-width:720px){main.jsx-330897323{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}}h2.jsx-330897323{color:#555;margin-bottom:1rem;}table.jsx-330897323,form.jsx-330897323{width:100%;margin:2rem auto;padding:2rem;border:none;border-radius:5px;}thead.jsx-330897323{background:#222;color:#fff;}tbody.jsx-330897323{background:#dedede;color:#333;}th.jsx-330897323,td.jsx-330897323{border-radius:2px;padding:0.5rem 1rem;border:none;box-shadow:0 0 7px rgba(0,0,0,0.3);}form.jsx-330897323{width:100%;margin:2rem auto;background:#dedede;padding:2rem;}input.jsx-330897323{width:100%;padding:0.7rem 1rem;border:none;border-radius:5px;margin:0.5rem 0;}p.jsx-330897323{color:green;text-transform:uppercase;font-size:1rem;margin:0.5rem;text-align:center;}button.jsx-330897323{padding:0.7rem 1rem;background:black;border:none;color:white;float:right;}.delete.jsx-330897323{background:#922;border-radius:50px;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL21pa2UvRGVza3RvcC9sZWFybmluZy9uZXh0anMtdGVzdC9wYWdlcy9jdXN0b20tc2VydmVyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQTBHVyxBQUc0QixBQUtXLEFBSWIsQUFLQSxBQVFLLEFBSUcsQUFLRCxBQU1QLEFBTUEsQUFPQyxBQU9RLEFBT0osV0F0REcsQUFLRixBQXVCQSxBQU1HLENBT0ssSUE1QmQsQUEwQ1EsRUFqQ0MsQ0FMVCxDQStCTSxPQWxDbkIsQ0FQZSxBQXNCTSxFQTVCckIsQUFpQkEsQ0FpQmMsSUFxQmQsRUFkaUIsQUFPSCxDQTFCQSxHQWZBLEVBNEJNLElBTkwsRUFvQkQsQ0ExQjBCLEVBbUJ4QixDQWxDSSxPQXNCcEIsQ0FNa0IsQUFjSixLQVBNLEtBbENwQixFQTBDQSxDQTdEeUIsR0ErQ3pCLENBMUNFLE1BaURGLENBcEJBLFlBakNBIiwiZmlsZSI6Ii9ob21lL21pa2UvRGVza3RvcC9sZWFybmluZy9uZXh0anMtdGVzdC9wYWdlcy9jdXN0b20tc2VydmVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlU3RhdGUsIHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBMYXlvdXQgZnJvbSAnLi4vY29tcG9uZW50cy9NeUxheW91dCc7XG5pbXBvcnQgSGVhZCBmcm9tICduZXh0L2hlYWQnO1xuaW1wb3J0IGZldGNoIGZyb20gJ2lzb21vcnBoaWMtdW5mZXRjaCc7XG5pbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnO1xuXG5jb25zdCBDdXN0b21TZXJ2ZXIgPSAoKSA9PiB7XG5cbiAgY29uc3QgW3N0YXRlLCBzZXRTdGF0ZV0gPSB1c2VTdGF0ZSh7XG4gICAgbmFtZTogJycsXG4gICAgZW1haWw6ICcnLFxuICAgIG1zZzogbnVsbCxcbiAgfSk7XG5cbiAgY29uc3QgW2RhdGEsIHNldERhdGFdID0gdXNlU3RhdGUoW10pO1xuXG4gIGNvbnN0IGdldFVzZXJzID0gYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7cHJvY2Vzcy5lbnYuVVJMfS9hcGkvYXV0aGApO1xuICAgIGNvbnN0IHVzZXJzID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDIwMCkgc2V0RGF0YSh1c2Vycyk7XG4gIH07XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBnZXRVc2VycygpO1xuXG4gICAgaWYgKHN0YXRlLm1zZykge1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHNldFN0YXRlKHsgbXNnOiAnJyB9KTtcbiAgICAgIH0sIDMwMDApO1xuICAgIH1cbiAgfSwgW3N0YXRlLm1zZ10pO1xuXG4gIGNvbnN0IGZldGNoRGF0YSA9IGFzeW5jICgpID0+IHtcbiAgICBjb25zdCB7IG5hbWUsIGVtYWlsIH0gPSBzdGF0ZTtcbiAgICBpZiAoIXN0YXRlLm5hbWUgfHwgIXN0YXRlLmVtYWlsKSByZXR1cm47XG5cbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGF4aW9zLnBvc3QoYCR7cHJvY2Vzcy5lbnYuVVJMfS9hcGkvYXV0aGAsIHsgbmFtZSwgZW1haWwgfSk7XG4gICAgc2V0U3RhdGUoeyBtc2c6IHJlc3BvbnNlLmRhdGEubWVzc2FnZSB9KTtcbiAgfTtcblxuICBjb25zdCBkZWxldGVkVXNlciA9IGFzeW5jIChpZCkgPT4ge1xuICAgIGF3YWl0IGF4aW9zLmRlbGV0ZShgJHtwcm9jZXNzLmVudi5VUkx9L2FwaS9hdXRoLyR7aWR9YCk7XG4gICAgZ2V0VXNlcnMoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGhhbmRsZVN1Ym1pdChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGZldGNoRGF0YSgpO1xuICAgIHNldFN0YXRlKHsgbmFtZTogJycsIGVtYWlsOiAnJyB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGhhbmRsZUNoYW5nZShlKSB7XG4gICAgc2V0U3RhdGUoeyAuLi5zdGF0ZSwgW2UudGFyZ2V0Lm5hbWVdOiBlLnRhcmdldC52YWx1ZSB9KTtcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPD5cbiAgICAgIDxIZWFkPlxuICAgICAgICA8dGl0bGU+Q3VzdG9tIHNlcnZlcjwvdGl0bGU+XG4gICAgICAgIDxtZXRhIG5hbWU9XCJkZXNjcmlwdGlvblwiIGNvbnRlbnQ9XCJ0aGlzIGlzIGEgdHYgcm91dGVcIiAvPlxuICAgICAgPC9IZWFkPlxuICAgICAgPExheW91dD5cbiAgICAgICAgPG1haW4+XG4gICAgICAgICAgPGZvcm0gb25TdWJtaXQ9e2hhbmRsZVN1Ym1pdH0+XG4gICAgICAgICAgICA8aDI+VXNlciBMaXN0PC9oMj5cbiAgICAgICAgICAgIHtzdGF0ZS5tc2cgJiYgPHA+e3N0YXRlLm1zZ308L3A+fVxuICAgICAgICAgICAgPGxhYmVsIGh0bWxGb3I9XCJuYW1lXCI+TmFtZTogPC9sYWJlbD5cbiAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgICAgIGlkPVwibmFtZVwiXG4gICAgICAgICAgICAgIG5hbWU9XCJuYW1lXCJcbiAgICAgICAgICAgICAgdmFsdWU9e3N0YXRlLm5hbWV9XG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVDaGFuZ2V9XG4gICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiTm8gaW5ncmVzYXIgZGF0b3MgdmFsaWRvcyBhaHJlISFcIlxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDxsYWJlbCBodG1sRm9yPVwiZW1haWxcIj5FbWFpbDogPC9sYWJlbD5cbiAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICB0eXBlPVwiZW1haWxcIlxuICAgICAgICAgICAgICBpZD1cImVtYWlsXCJcbiAgICAgICAgICAgICAgbmFtZT1cImVtYWlsXCJcbiAgICAgICAgICAgICAgdmFsdWU9e3N0YXRlLmVtYWlsfVxuICAgICAgICAgICAgICBvbkNoYW5nZT17aGFuZGxlQ2hhbmdlfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDxidXR0b24gdHlwZT1cInN1Ym1pdFwiPlNhdmUgZGF0YTwvYnV0dG9uPlxuICAgICAgICAgIDwvZm9ybT5cbiAgICAgICAgICA8dGFibGUgYm9yZGVyPVwiMVwiPlxuICAgICAgICAgICAgPHRoZWFkPlxuICAgICAgICAgICAgICA8dHI+XG4gICAgICAgICAgICAgICAgPHRoPlVTRVJTPC90aD5cbiAgICAgICAgICAgICAgICA8dGg+QDwvdGg+XG4gICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICA8L3RoZWFkPlxuICAgICAgICAgICAgPHRib2R5PlxuICAgICAgICAgICAgICB7ZGF0YSAmJlxuICAgICAgICAgICAgICAgIGRhdGEubWFwKCh1c2VyKSA9PiAoXG4gICAgICAgICAgICAgICAgICA8dHIga2V5PXt1c2VyLl9pZH0+XG4gICAgICAgICAgICAgICAgICAgIDx0ZD57dXNlci5uYW1lfTwvdGQ+XG4gICAgICAgICAgICAgICAgICAgIDx0ZD57dXNlci5lbWFpbH0gXG4gICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9XCJkZWxldGVcIiBvbkNsaWNrPXsoKSA9PiBkZWxldGVkVXNlcih1c2VyLl9pZCl9Plg8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICA8L3Rib2R5PlxuICAgICAgICAgIDwvdGFibGU+XG4gICAgICAgIDwvbWFpbj5cbiAgICAgICAgPHN0eWxlIGpzeD5cbiAgICAgICAgICB7YFxuICAgICAgICAgICAgbWFpbiB7XG4gICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgIGZvbnQtZmFtaWx5OiBzYW5zLXNlcmlmO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgQG1lZGlhIChtYXgtd2lkdGg6IDcyMHB4KSB7XG4gICAgICAgICAgICAgIG1haW4ge1xuICAgICAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGgyIHtcbiAgICAgICAgICAgICAgY29sb3I6ICM1NTU7XG4gICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDFyZW07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0YWJsZSxcbiAgICAgICAgICAgIGZvcm0ge1xuICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgICAgbWFyZ2luOiAycmVtIGF1dG87XG4gICAgICAgICAgICAgIC8vIGJhY2tncm91bmQ6ICMwMDA7XG4gICAgICAgICAgICAgIHBhZGRpbmc6IDJyZW07XG4gICAgICAgICAgICAgIGJvcmRlcjogbm9uZTtcbiAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNXB4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhlYWQge1xuICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAjMjIyO1xuICAgICAgICAgICAgICBjb2xvcjogI2ZmZjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRib2R5IHtcbiAgICAgICAgICAgICAgYmFja2dyb3VuZDogI2RlZGVkZTtcbiAgICAgICAgICAgICAgY29sb3I6ICMzMzM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aCxcbiAgICAgICAgICAgIHRkIHtcbiAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMnB4O1xuICAgICAgICAgICAgICBwYWRkaW5nOiAwLjVyZW0gMXJlbTtcbiAgICAgICAgICAgICAgYm9yZGVyOiBub25lO1xuICAgICAgICAgICAgICBib3gtc2hhZG93OiAwIDAgN3B4IHJnYmEoMCwgMCwgMCwgMC4zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvcm0ge1xuICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgICAgbWFyZ2luOiAycmVtIGF1dG87XG4gICAgICAgICAgICAgIGJhY2tncm91bmQ6ICNkZWRlZGU7XG4gICAgICAgICAgICAgIHBhZGRpbmc6IDJyZW07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpbnB1dCB7XG4gICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgICBwYWRkaW5nOiAwLjdyZW0gMXJlbTtcbiAgICAgICAgICAgICAgYm9yZGVyOiBub25lO1xuICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1cHg7XG4gICAgICAgICAgICAgIG1hcmdpbjogMC41cmVtIDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwIHtcbiAgICAgICAgICAgICAgY29sb3I6IGdyZWVuO1xuICAgICAgICAgICAgICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlO1xuICAgICAgICAgICAgICBmb250LXNpemU6IDFyZW07XG4gICAgICAgICAgICAgIG1hcmdpbjogMC41cmVtO1xuICAgICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBidXR0b24ge1xuICAgICAgICAgICAgICBwYWRkaW5nOiAwLjdyZW0gMXJlbTtcbiAgICAgICAgICAgICAgYmFja2dyb3VuZDogYmxhY2s7XG4gICAgICAgICAgICAgIGJvcmRlcjogbm9uZTtcbiAgICAgICAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgICAgICAgICBmbG9hdDogcmlnaHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAuZGVsZXRlIHtcbiAgICAgICAgICAgICAgYmFja2dyb3VuZDogIzkyMjtcbiAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNTBweDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICBgfVxuICAgICAgICA8L3N0eWxlPlxuICAgICAgPC9MYXlvdXQ+XG4gICAgPC8+XG4gICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBDdXN0b21TZXJ2ZXI7XG4iXX0= */\\n/*@ sourceURL=/home/mike/Desktop/learning/nextjs-test/pages/custom-server.js */\")));\n};\n\nexport default CustomServer;","map":{"version":3,"sources":["/home/mike/Desktop/learning/nextjs-test/pages/custom-server.js"],"names":["useState","useEffect","Layout","Head","fetch","axios","CustomServer","state","setState","name","email","msg","data","setData","getUsers","response","process","env","URL","users","json","status","setTimeout","fetchData","post","message","deletedUser","id","delete","handleSubmit","e","preventDefault","handleChange","target","value","map","user","_id"],"mappings":"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","sourcesContent":["import { useState, useEffect } from 'react';\nimport Layout from '../components/MyLayout';\nimport Head from 'next/head';\nimport fetch from 'isomorphic-unfetch';\nimport axios from 'axios';\n\nconst CustomServer = () => {\n\n  const [state, setState] = useState({\n    name: '',\n    email: '',\n    msg: null,\n  });\n\n  const [data, setData] = useState([]);\n\n  const getUsers = async () => {\n    const response = await fetch(`${process.env.URL}/api/auth`);\n    const users = await response.json();\n    if (response.status === 200) setData(users);\n  };\n\n  useEffect(() => {\n    getUsers();\n\n    if (state.msg) {\n      setTimeout(() => {\n        setState({ msg: '' });\n      }, 3000);\n    }\n  }, [state.msg]);\n\n  const fetchData = async () => {\n    const { name, email } = state;\n    if (!state.name || !state.email) return;\n\n    const response = await axios.post(`${process.env.URL}/api/auth`, { name, email });\n    setState({ msg: response.data.message });\n  };\n\n  const deletedUser = async (id) => {\n    await axios.delete(`${process.env.URL}/api/auth/${id}`);\n    getUsers();\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    fetchData();\n    setState({ name: '', email: '' });\n  }\n\n  function handleChange(e) {\n    setState({ ...state, [e.target.name]: e.target.value });\n  }\n\n  return (\n    <>\n      <Head>\n        <title>Custom server</title>\n        <meta name=\"description\" content=\"this is a tv route\" />\n      </Head>\n      <Layout>\n        <main>\n          <form onSubmit={handleSubmit}>\n            <h2>User List</h2>\n            {state.msg && <p>{state.msg}</p>}\n            <label htmlFor=\"name\">Name: </label>\n            <input\n              type=\"text\"\n              id=\"name\"\n              name=\"name\"\n              value={state.name}\n              onChange={handleChange}\n              placeholder=\"No ingresar datos validos ahre!!\"\n            />\n            <label htmlFor=\"email\">Email: </label>\n            <input\n              type=\"email\"\n              id=\"email\"\n              name=\"email\"\n              value={state.email}\n              onChange={handleChange}\n            />\n            <button type=\"submit\">Save data</button>\n          </form>\n          <table border=\"1\">\n            <thead>\n              <tr>\n                <th>USERS</th>\n                <th>@</th>\n              </tr>\n            </thead>\n            <tbody>\n              {data &&\n                data.map((user) => (\n                  <tr key={user._id}>\n                    <td>{user.name}</td>\n                    <td>{user.email} \n                      <button className=\"delete\" onClick={() => deletedUser(user._id)}>X</button>\n                    </td>\n                  </tr>\n                ))}\n            </tbody>\n          </table>\n        </main>\n        <style jsx>\n          {`\n            main {\n              display: flex;\n              font-family: sans-serif;\n            }\n            @media (max-width: 720px) {\n              main {\n                flex-direction: column;\n              }\n            }\n            h2 {\n              color: #555;\n              margin-bottom: 1rem;\n            }\n            table,\n            form {\n              width: 100%;\n              margin: 2rem auto;\n              // background: #000;\n              padding: 2rem;\n              border: none;\n              border-radius: 5px;\n            }\n            thead {\n              background: #222;\n              color: #fff;\n            }\n            tbody {\n              background: #dedede;\n              color: #333;\n            }\n            th,\n            td {\n              border-radius: 2px;\n              padding: 0.5rem 1rem;\n              border: none;\n              box-shadow: 0 0 7px rgba(0, 0, 0, 0.3);\n            }\n            form {\n              width: 100%;\n              margin: 2rem auto;\n              background: #dedede;\n              padding: 2rem;\n            }\n            input {\n              width: 100%;\n              padding: 0.7rem 1rem;\n              border: none;\n              border-radius: 5px;\n              margin: 0.5rem 0;\n            }\n            p {\n              color: green;\n              text-transform: uppercase;\n              font-size: 1rem;\n              margin: 0.5rem;\n              text-align: center;\n            }\n            button {\n              padding: 0.7rem 1rem;\n              background: black;\n              border: none;\n              color: white;\n              float: right;\n            }\n            .delete {\n              background: #922;\n              border-radius: 50px;\n            }\n          `}\n        </style>\n      </Layout>\n    </>\n  );\n};\n\nexport default CustomServer;\n"]},"metadata":{},"sourceType":"module"}