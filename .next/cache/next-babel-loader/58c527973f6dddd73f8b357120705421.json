{"ast":null,"code":"import _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport Layout from '../components/MyLayout';\nimport Head from 'next/head';\nimport fetch from 'isomorphic-unfetch';\nimport axios from 'axios';\nimport { useState, useEffect } from 'react';\n\nconst CustomServer = () => {\n  const {\n    0: state,\n    1: setState\n  } = useState({\n    name: '',\n    email: '',\n    msg: ''\n  });\n  const {\n    0: data,\n    1: setData\n  } = useState([{}]);\n  useEffect(() => {\n    const getUsers = async () => {\n      const url = `${process.env.URL}/auth`;\n      const response = await fetch('/auth');\n      const users = await response.json();\n      setData(users);\n    };\n\n    getUsers();\n\n    if (state.msg) {\n      setTimeout(() => {\n        setState({\n          msg: ''\n        });\n      }, 3000);\n    }\n  }, [state.msg]);\n\n  const fetchData = async () => {\n    const {\n      name,\n      email\n    } = state;\n    if (!state.name || !state.email) return;\n    const response = await axios.post('/auth', {\n      name,\n      email\n    });\n    setState({\n      msg: response.data.message\n    });\n    console.log(response);\n  };\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    fetchData();\n    setState({\n      name: '',\n      email: ''\n    });\n    console.log(data);\n  }\n\n  function handleChange(e) {\n    setState(_objectSpread({}, state, {\n      [e.target.name]: e.target.value\n    }));\n  }\n\n  return __jsx(React.Fragment, null, __jsx(Head, null, __jsx(\"title\", null, \"Custom server\"), __jsx(\"meta\", {\n    name: \"description\",\n    content: \"this is a tv route\"\n  })), __jsx(Layout, null, __jsx(\"div\", {\n    className: \"jsx-2224040409\"\n  }, __jsx(\"main\", {\n    className: \"jsx-2224040409\"\n  }, __jsx(\"form\", {\n    onSubmit: handleSubmit,\n    className: \"jsx-2224040409\"\n  }, __jsx(\"label\", {\n    htmlFor: \"name\",\n    className: \"jsx-2224040409\"\n  }, \"Name: \"), __jsx(\"input\", {\n    type: \"text\",\n    id: \"name\",\n    name: \"name\",\n    value: state.name,\n    onChange: handleChange,\n    className: \"jsx-2224040409\"\n  }), __jsx(\"label\", {\n    htmlFor: \"email\",\n    className: \"jsx-2224040409\"\n  }, \"Email: \"), __jsx(\"input\", {\n    type: \"email\",\n    id: \"email\",\n    name: \"email\",\n    value: state.email,\n    onChange: handleChange,\n    className: \"jsx-2224040409\"\n  }), __jsx(\"button\", {\n    type: \"submit\",\n    className: \"jsx-2224040409\"\n  }, \"Save data\"), state.msg && __jsx(\"p\", {\n    className: \"jsx-2224040409\"\n  }, state.msg)), data.message && __jsx(\"h2\", {\n    className: \"jsx-2224040409\"\n  }, data.message), __jsx(\"table\", {\n    border: \"1\",\n    className: \"jsx-2224040409\"\n  }, __jsx(\"thead\", {\n    className: \"jsx-2224040409\"\n  }, __jsx(\"tr\", {\n    className: \"jsx-2224040409\"\n  }, __jsx(\"th\", {\n    className: \"jsx-2224040409\"\n  }, \"USERS\"), __jsx(\"th\", {\n    className: \"jsx-2224040409\"\n  }, \"@\"))), __jsx(\"tbody\", {\n    className: \"jsx-2224040409\"\n  }, console.log(data, Object.keys(data).length !== 0), !data && data.map(user => __jsx(\"tr\", {\n    key: user._id,\n    className: \"jsx-2224040409\"\n  }, __jsx(\"td\", {\n    className: \"jsx-2224040409\"\n  }, user.name), __jsx(\"td\", {\n    className: \"jsx-2224040409\"\n  }, user.email)))))), __jsx(_JSXStyle, {\n    id: \"2224040409\"\n  }, \"main.jsx-2224040409{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}@media (max-width:720px){main.jsx-2224040409{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}}table.jsx-2224040409,form.jsx-2224040409{width:100%;margin:2rem auto;background:#000;padding:2rem;border:none;border-radius:5px;}thead.jsx-2224040409{background:#222;color:#fff;}tbody.jsx-2224040409{background:#dedede;color:#333;}th.jsx-2224040409,td.jsx-2224040409{border-radius:2px;padding:0.5rem 1rem;border:none;box-shadow:0 0 7px rgba(0,0,0,0.3);}form.jsx-2224040409{width:100%;margin:2rem auto;background:#dedede;padding:2rem;}input.jsx-2224040409{width:100%;padding:0.7rem 1rem;border:none;border-radius:5px;margin:0.5rem 0;}p.jsx-2224040409{color:green;text-transform:uppercase;font-size:1rem;margin:.5rem;text-align:center;}button.jsx-2224040409{padding:0.7rem 1rem;background:black;border:none;color:white;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL21pa2UvRGVza3RvcC9sZWFybmluZy9uZXh0anMtdGVzdC9wYWdlcy9jdXN0b20tc2VydmVyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQXFHYSxBQUc4QixBQUlXLEFBS2IsQUFRSyxBQUlHLEFBS0QsQUFNUCxBQU1BLEFBT0MsQUFPUSxXQTFDSCxBQXVCQSxBQU1HLENBT0ssSUE1QmQsRUFTUyxDQUxULENBK0JNLE9BbENuQixDQVJrQixBQXVCRyxFQVhyQixDQWlCYyxNQU9HLEFBT0gsQ0ExQkEsS0FhTSxDQTdCTCxHQXVCQSxFQW9CRCxDQTFCMEIsRUFtQnpCLEtBbkNELEdBdUJkLENBTWtCLEFBY2xCLElBUG9CLElBbkNBLEtBYnBCLEdBMENBLENBdENFLEtBNkNGLEVBcEJBLEVBZkEiLCJmaWxlIjoiL2hvbWUvbWlrZS9EZXNrdG9wL2xlYXJuaW5nL25leHRqcy10ZXN0L3BhZ2VzL2N1c3RvbS1zZXJ2ZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgTGF5b3V0IGZyb20gJy4uL2NvbXBvbmVudHMvTXlMYXlvdXQnO1xuaW1wb3J0IEhlYWQgZnJvbSAnbmV4dC9oZWFkJztcbmltcG9ydCBmZXRjaCBmcm9tICdpc29tb3JwaGljLXVuZmV0Y2gnO1xuaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJztcbmltcG9ydCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCc7XG5cbmNvbnN0IEN1c3RvbVNlcnZlciA9ICgpID0+IHtcbiAgY29uc3QgW3N0YXRlLCBzZXRTdGF0ZV0gPSB1c2VTdGF0ZSh7XG4gICAgbmFtZTogJycsXG4gICAgZW1haWw6ICcnLFxuICAgIG1zZzogJydcbiAgfSk7XG5cbiAgY29uc3QgWyBkYXRhLCBzZXREYXRhIF0gPSB1c2VTdGF0ZShbe31dKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGdldFVzZXJzID0gYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdXJsID0gYCR7cHJvY2Vzcy5lbnYuVVJMfS9hdXRoYDtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJy9hdXRoJyk7XG4gICAgICBjb25zdCB1c2VycyA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgIHNldERhdGEodXNlcnMpO1xuICAgIH1cblxuICAgIGdldFVzZXJzKCk7XG5cbiAgICBpZiAoc3RhdGUubXNnKSB7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgc2V0U3RhdGUoeyBtc2c6ICcnfSk7XG4gICAgICB9LCAzMDAwKTtcbiAgICB9XG4gIH0sIFtzdGF0ZS5tc2ddKTtcblxuICBjb25zdCBmZXRjaERhdGEgPSBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgeyBuYW1lLCBlbWFpbCB9ID0gc3RhdGU7XG4gICAgaWYoIXN0YXRlLm5hbWUgfHwgIXN0YXRlLmVtYWlsICkgcmV0dXJuO1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MucG9zdCgnL2F1dGgnLCB7IG5hbWUsIGVtYWlsIH0pO1xuICAgIHNldFN0YXRlKHsgbXNnOiByZXNwb25zZS5kYXRhLm1lc3NhZ2V9KTtcbiAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7XG4gIH07XG5cbiAgZnVuY3Rpb24gaGFuZGxlU3VibWl0KGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgZmV0Y2hEYXRhKCk7XG4gICAgc2V0U3RhdGUoeyBuYW1lOiAnJywgZW1haWw6ICcnfSk7XG4gICAgY29uc29sZS5sb2coZGF0YSk7XG4gIH1cblxuXG4gIGZ1bmN0aW9uIGhhbmRsZUNoYW5nZShlKSB7XG4gICAgc2V0U3RhdGUoey4uLnN0YXRlLCBbZS50YXJnZXQubmFtZV06IGUudGFyZ2V0LnZhbHVlIH0pO1xuICB9XG5cbiAgcmV0dXJuIChcbiAgICA8PlxuICAgICAgPEhlYWQ+XG4gICAgICAgIDx0aXRsZT5DdXN0b20gc2VydmVyPC90aXRsZT5cbiAgICAgICAgPG1ldGEgbmFtZT1cImRlc2NyaXB0aW9uXCIgY29udGVudD1cInRoaXMgaXMgYSB0diByb3V0ZVwiIC8+XG4gICAgICA8L0hlYWQ+XG4gICAgICA8TGF5b3V0PlxuICAgICAgICA8ZGl2PlxuICAgICAgICAgIDxtYWluPlxuICAgICAgICAgICAgPGZvcm0gb25TdWJtaXQ9e2hhbmRsZVN1Ym1pdH0+XG4gICAgICAgICAgICAgIDxsYWJlbCBodG1sRm9yPVwibmFtZVwiPk5hbWU6IDwvbGFiZWw+XG4gICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgICAgICAgICBpZD1cIm5hbWVcIlxuICAgICAgICAgICAgICAgIG5hbWU9XCJuYW1lXCJcbiAgICAgICAgICAgICAgICB2YWx1ZT17c3RhdGUubmFtZX1cbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17aGFuZGxlQ2hhbmdlfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8bGFiZWwgaHRtbEZvcj1cImVtYWlsXCI+RW1haWw6IDwvbGFiZWw+XG4gICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgIHR5cGU9XCJlbWFpbFwiXG4gICAgICAgICAgICAgICAgaWQ9XCJlbWFpbFwiXG4gICAgICAgICAgICAgICAgbmFtZT1cImVtYWlsXCJcbiAgICAgICAgICAgICAgICB2YWx1ZT17c3RhdGUuZW1haWx9XG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9e2hhbmRsZUNoYW5nZX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwic3VibWl0XCI+U2F2ZSBkYXRhPC9idXR0b24+XG4gICAgICAgICAgICAgIHtzdGF0ZS5tc2cgJiYgPHA+e3N0YXRlLm1zZ308L3A+fVxuICAgICAgICAgICAgPC9mb3JtPlxuICAgICAgICAgICAge2RhdGEubWVzc2FnZSAmJiA8aDI+e2RhdGEubWVzc2FnZX08L2gyPn1cbiAgICAgICAgICAgIDx0YWJsZSBib3JkZXI9XCIxXCI+XG4gICAgICAgICAgICAgIDx0aGVhZD5cbiAgICAgICAgICAgICAgICA8dHI+XG4gICAgICAgICAgICAgICAgICA8dGg+VVNFUlM8L3RoPlxuICAgICAgICAgICAgICAgICAgPHRoPkA8L3RoPlxuICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICAgIDwvdGhlYWQ+XG4gICAgICAgICAgICAgIDx0Ym9keT5cbiAgICAgICAgICAgICAgICB7Y29uc29sZS5sb2coZGF0YSwgT2JqZWN0LmtleXMoZGF0YSkubGVuZ3RoICE9PSAwKX1cbiAgICAgICAgICAgICAgICB7IWRhdGEgJiYgZGF0YS5tYXAoKHVzZXIpID0+IChcbiAgICAgICAgICAgICAgICAgIDx0ciBrZXk9e3VzZXIuX2lkfT5cbiAgICAgICAgICAgICAgICAgICAgPHRkPnt1c2VyLm5hbWV9PC90ZD5cbiAgICAgICAgICAgICAgICAgICAgPHRkPnt1c2VyLmVtYWlsfTwvdGQ+XG4gICAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICA8L3Rib2R5PlxuICAgICAgICAgICAgPC90YWJsZT5cbiAgICAgICAgICA8L21haW4+XG4gICAgICAgICAgPHN0eWxlIGpzeD5cbiAgICAgICAgICAgIHtgXG4gICAgICAgICAgICAgIG1haW4ge1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgQG1lZGlhIChtYXgtd2lkdGg6IDcyMHB4KSB7XG4gICAgICAgICAgICAgICAgbWFpbiB7XG4gICAgICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB0YWJsZSxcbiAgICAgICAgICAgICAgZm9ybSB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICAgICAgbWFyZ2luOiAycmVtIGF1dG87XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZDogIzAwMDtcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiAycmVtO1xuICAgICAgICAgICAgICAgIGJvcmRlcjogbm9uZTtcbiAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1cHg7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgdGhlYWQge1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6ICMyMjI7XG4gICAgICAgICAgICAgICAgY29sb3I6ICNmZmY7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgdGJvZHkge1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6ICNkZWRlZGU7XG4gICAgICAgICAgICAgICAgY29sb3I6ICMzMzM7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgdGgsXG4gICAgICAgICAgICAgIHRkIHtcbiAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiAycHg7XG4gICAgICAgICAgICAgICAgcGFkZGluZzogMC41cmVtIDFyZW07XG4gICAgICAgICAgICAgICAgYm9yZGVyOiBub25lO1xuICAgICAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgMCA3cHggcmdiYSgwLCAwLCAwLCAwLjMpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGZvcm0ge1xuICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgICAgIG1hcmdpbjogMnJlbSBhdXRvO1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6ICNkZWRlZGU7XG4gICAgICAgICAgICAgICAgcGFkZGluZzogMnJlbTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpbnB1dCB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICAgICAgcGFkZGluZzogMC43cmVtIDFyZW07XG4gICAgICAgICAgICAgICAgYm9yZGVyOiBub25lO1xuICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDVweDtcbiAgICAgICAgICAgICAgICBtYXJnaW46IDAuNXJlbSAwO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHAge1xuICAgICAgICAgICAgICAgIGNvbG9yOiBncmVlbjtcbiAgICAgICAgICAgICAgICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlO1xuICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMXJlbTtcbiAgICAgICAgICAgICAgICBtYXJnaW46IC41cmVtO1xuICAgICAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBidXR0b24ge1xuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDAuN3JlbSAxcmVtO1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IGJsYWNrO1xuICAgICAgICAgICAgICAgIGJvcmRlcjogbm9uZTtcbiAgICAgICAgICAgICAgICBjb2xvcjogd2hpdGU7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGB9XG4gICAgICAgICAgPC9zdHlsZT5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L0xheW91dD5cbiAgICA8Lz5cbiAgKTtcbn07XG5cbi8vIEN1c3RvbVNlcnZlci5nZXRJbml0aWFsUHJvcHMgPSBhc3luYyAoY3R4KSA9PiB7XG4vLyAgIGNvbnN0IHVybCA9IGAke3Byb2Nlc3MuZW52LlVSTH0vYXV0aGA7XG4vLyAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsKTtcbi8vICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuLy8gICByZXR1cm4geyBkYXRhIH07XG4vLyB9O1xuXG5leHBvcnQgZGVmYXVsdCBDdXN0b21TZXJ2ZXI7XG4iXX0= */\\n/*@ sourceURL=/home/mike/Desktop/learning/nextjs-test/pages/custom-server.js */\"))));\n}; // CustomServer.getInitialProps = async (ctx) => {\n//   const url = `${process.env.URL}/auth`;\n//   const response = await fetch(url);\n//   const data = await response.json();\n//   return { data };\n// };\n\n\nexport default CustomServer;","map":{"version":3,"sources":["/home/mike/Desktop/learning/nextjs-test/pages/custom-server.js"],"names":["Layout","Head","fetch","axios","useState","useEffect","CustomServer","state","setState","name","email","msg","data","setData","getUsers","url","process","env","URL","response","users","json","setTimeout","fetchData","post","message","console","log","handleSubmit","e","preventDefault","handleChange","target","value","Object","keys","length","map","user","_id"],"mappings":"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","sourcesContent":["import Layout from '../components/MyLayout';\nimport Head from 'next/head';\nimport fetch from 'isomorphic-unfetch';\nimport axios from 'axios';\nimport { useState, useEffect } from 'react';\n\nconst CustomServer = () => {\n  const [state, setState] = useState({\n    name: '',\n    email: '',\n    msg: ''\n  });\n\n  const [ data, setData ] = useState([{}]);\n\n  useEffect(() => {\n    const getUsers = async () => {\n      const url = `${process.env.URL}/auth`;\n      const response = await fetch('/auth');\n      const users = await response.json();\n      setData(users);\n    }\n\n    getUsers();\n\n    if (state.msg) {\n      setTimeout(() => {\n        setState({ msg: ''});\n      }, 3000);\n    }\n  }, [state.msg]);\n\n  const fetchData = async () => {\n    const { name, email } = state;\n    if(!state.name || !state.email ) return;\n    const response = await axios.post('/auth', { name, email });\n    setState({ msg: response.data.message});\n    console.log(response);\n  };\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    fetchData();\n    setState({ name: '', email: ''});\n    console.log(data);\n  }\n\n\n  function handleChange(e) {\n    setState({...state, [e.target.name]: e.target.value });\n  }\n\n  return (\n    <>\n      <Head>\n        <title>Custom server</title>\n        <meta name=\"description\" content=\"this is a tv route\" />\n      </Head>\n      <Layout>\n        <div>\n          <main>\n            <form onSubmit={handleSubmit}>\n              <label htmlFor=\"name\">Name: </label>\n              <input\n                type=\"text\"\n                id=\"name\"\n                name=\"name\"\n                value={state.name}\n                onChange={handleChange}\n              />\n              <label htmlFor=\"email\">Email: </label>\n              <input\n                type=\"email\"\n                id=\"email\"\n                name=\"email\"\n                value={state.email}\n                onChange={handleChange}\n              />\n              <button type=\"submit\">Save data</button>\n              {state.msg && <p>{state.msg}</p>}\n            </form>\n            {data.message && <h2>{data.message}</h2>}\n            <table border=\"1\">\n              <thead>\n                <tr>\n                  <th>USERS</th>\n                  <th>@</th>\n                </tr>\n              </thead>\n              <tbody>\n                {console.log(data, Object.keys(data).length !== 0)}\n                {!data && data.map((user) => (\n                  <tr key={user._id}>\n                    <td>{user.name}</td>\n                    <td>{user.email}</td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </main>\n          <style jsx>\n            {`\n              main {\n                display: flex;\n              }\n              @media (max-width: 720px) {\n                main {\n                  flex-direction: column;\n                }\n              }\n              table,\n              form {\n                width: 100%;\n                margin: 2rem auto;\n                background: #000;\n                padding: 2rem;\n                border: none;\n                border-radius: 5px;\n              }\n              thead {\n                background: #222;\n                color: #fff;\n              }\n              tbody {\n                background: #dedede;\n                color: #333;\n              }\n              th,\n              td {\n                border-radius: 2px;\n                padding: 0.5rem 1rem;\n                border: none;\n                box-shadow: 0 0 7px rgba(0, 0, 0, 0.3);\n              }\n              form {\n                width: 100%;\n                margin: 2rem auto;\n                background: #dedede;\n                padding: 2rem;\n              }\n              input {\n                width: 100%;\n                padding: 0.7rem 1rem;\n                border: none;\n                border-radius: 5px;\n                margin: 0.5rem 0;\n              }\n              p {\n                color: green;\n                text-transform: uppercase;\n                font-size: 1rem;\n                margin: .5rem;\n                text-align: center;\n              }\n              button {\n                padding: 0.7rem 1rem;\n                background: black;\n                border: none;\n                color: white;\n              }\n            `}\n          </style>\n        </div>\n      </Layout>\n    </>\n  );\n};\n\n// CustomServer.getInitialProps = async (ctx) => {\n//   const url = `${process.env.URL}/auth`;\n//   const response = await fetch(url);\n//   const data = await response.json();\n\n//   return { data };\n// };\n\nexport default CustomServer;\n"]},"metadata":{},"sourceType":"module"}