{"ast":null,"code":"import allQuotes from '../../quotes.json';\nimport Cors from 'micro-cors';\nimport mongoose, { mongo } from 'mongoose';\nconst cors = Cors({\n  allowMethods: ['GET', 'HEAD']\n});\nconst UserSchema = mongoose.Schema({\n  name: {\n    type: String\n  }\n});\nconst model = mongoose.model('user', UserSchema);\nmongoose.connect(process.env.MONGO_URL, {\n  useNewUrlParser: true,\n  useUnifiedTopology: true\n});\n\nconst handler = async (req, res) => {\n  const {\n    name\n  } = req.query;\n  let user = await model.find({\n    name\n  });\n  if (user) console.log(user);\n  user = new model(req.query);\n  await ser.save();\n  res.status(200).json(user);\n};\n\nexport default cors(handler);","map":{"version":3,"sources":["/home/mike/Desktop/learning/nextjs-test/pages/api/randomQuote.js"],"names":["allQuotes","Cors","mongoose","mongo","cors","allowMethods","UserSchema","Schema","name","type","String","model","connect","process","env","MONGO_URL","useNewUrlParser","useUnifiedTopology","handler","req","res","query","user","find","console","log","ser","save","status","json"],"mappings":"AAAA,OAAOA,SAAP,MAAsB,mBAAtB;AACA,OAAOC,IAAP,MAAiB,YAAjB;AACA,OAAOC,QAAP,IAAmBC,KAAnB,QAAgC,UAAhC;AAEA,MAAMC,IAAI,GAAGH,IAAI,CAAC;AAChBI,EAAAA,YAAY,EAAE,CAAC,KAAD,EAAQ,MAAR;AADE,CAAD,CAAjB;AAIA,MAAMC,UAAU,GAAGJ,QAAQ,CAACK,MAAT,CAAgB;AACjCC,EAAAA,IAAI,EAAE;AACJC,IAAAA,IAAI,EAACC;AADD;AAD2B,CAAhB,CAAnB;AAMA,MAAMC,KAAK,GAAGT,QAAQ,CAACS,KAAT,CAAe,MAAf,EAAuBL,UAAvB,CAAd;AAEAJ,QAAQ,CAACU,OAAT,CAAiBC,OAAO,CAACC,GAAR,CAAYC,SAA7B,EAAwC;AACtCC,EAAAA,eAAe,EAAE,IADqB;AAEtCC,EAAAA,kBAAkB,EAAE;AAFkB,CAAxC;;AAKA,MAAMC,OAAO,GAAG,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AAClC,QAAM;AAACZ,IAAAA;AAAD,MAASW,GAAG,CAACE,KAAnB;AAEA,MAAIC,IAAI,GAAG,MAAMX,KAAK,CAACY,IAAN,CAAW;AAACf,IAAAA;AAAD,GAAX,CAAjB;AACA,MAAGc,IAAH,EAASE,OAAO,CAACC,GAAR,CAAYH,IAAZ;AAETA,EAAAA,IAAI,GAAG,IAAIX,KAAJ,CAAUQ,GAAG,CAACE,KAAd,CAAP;AAEA,QAAMK,GAAG,CAACC,IAAJ,EAAN;AACAP,EAAAA,GAAG,CAACQ,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBP,IAArB;AACD,CAVD;;AAYA,eAAelB,IAAI,CAACc,OAAD,CAAnB","sourcesContent":["import allQuotes from '../../quotes.json';\nimport Cors from 'micro-cors';\nimport mongoose, { mongo } from 'mongoose';\n\nconst cors = Cors({\n  allowMethods: ['GET', 'HEAD'],\n});\n\nconst UserSchema = mongoose.Schema({\n  name: {\n    type:String,\n  }\n})\n\nconst model = mongoose.model('user', UserSchema);\n\nmongoose.connect(process.env.MONGO_URL, {\n  useNewUrlParser: true,\n  useUnifiedTopology: true\n})\n\nconst handler = async (req, res) => {\n  const {name} = req.query;\n\n  let user = await model.find({name});\n  if(user) console.log(user);\n\n  user = new model(req.query)\n\n  await ser.save();\n  res.status(200).json(user)\n};\n\nexport default cors(handler);"]},"metadata":{},"sourceType":"module"}