{"ast":null,"code":"import _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport Layout from '../components/MyLayout';\nimport Head from 'next/head';\nimport fetch from 'isomorphic-unfetch';\nimport axios from 'axios';\nimport { useState, useEffect } from 'react';\n\nconst CustomServer = ({\n  data\n}) => {\n  const {\n    0: users,\n    1: setUsers\n  } = useState({});\n  console.log(Object.entries(data).length === 0);\n  const {\n    0: state,\n    1: setState\n  } = useState({\n    name: '',\n    email: '',\n    msg: ''\n  });\n  useEffect(() => {\n    setUsers(data);\n\n    if (state.msg) {\n      setTimeout(() => {\n        setState({\n          msg: ''\n        });\n      }, 3000);\n    }\n  }, [state.msg, data, users]);\n\n  const fetchData = async () => {\n    const {\n      name,\n      email\n    } = state;\n    if (!state.name || !state.email) return;\n    const response = await axios.post('/auth', {\n      name,\n      email\n    });\n    setState({\n      msg: response.data.message\n    });\n    console.log(response);\n  };\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    fetchData();\n    setState({\n      name: '',\n      email: ''\n    });\n  }\n\n  function handleChange(e) {\n    setState(_objectSpread({}, state, {\n      [e.target.name]: e.target.value\n    }));\n  }\n\n  return __jsx(React.Fragment, null, __jsx(Head, null, __jsx(\"title\", null, \"Custom server\"), __jsx(\"meta\", {\n    name: \"description\",\n    content: \"this is a tv route\"\n  })), __jsx(Layout, null, __jsx(\"div\", {\n    className: \"jsx-2224040409\"\n  }, __jsx(\"h2\", {\n    className: \"jsx-2224040409\"\n  }, \"Custom Server\"), __jsx(\"main\", {\n    className: \"jsx-2224040409\"\n  }, __jsx(\"form\", {\n    onSubmit: handleSubmit,\n    className: \"jsx-2224040409\"\n  }, __jsx(\"label\", {\n    htmlFor: \"name\",\n    className: \"jsx-2224040409\"\n  }, \"Name: \"), __jsx(\"input\", {\n    type: \"text\",\n    id: \"name\",\n    name: \"name\",\n    value: state.name,\n    onChange: handleChange,\n    className: \"jsx-2224040409\"\n  }), __jsx(\"label\", {\n    htmlFor: \"email\",\n    className: \"jsx-2224040409\"\n  }, \"Email: \"), __jsx(\"input\", {\n    type: \"email\",\n    id: \"email\",\n    name: \"email\",\n    value: state.email,\n    onChange: handleChange,\n    className: \"jsx-2224040409\"\n  }), __jsx(\"button\", {\n    type: \"submit\",\n    className: \"jsx-2224040409\"\n  }, \"Save data\"), state.msg && __jsx(\"p\", {\n    className: \"jsx-2224040409\"\n  }, state.msg)), __jsx(\"table\", {\n    border: \"1\",\n    className: \"jsx-2224040409\"\n  }, __jsx(\"thead\", {\n    className: \"jsx-2224040409\"\n  }, __jsx(\"tr\", {\n    className: \"jsx-2224040409\"\n  }, __jsx(\"th\", {\n    className: \"jsx-2224040409\"\n  }, \"USERS\"), __jsx(\"th\", {\n    className: \"jsx-2224040409\"\n  }, \"@\"))), __jsx(\"tbody\", {\n    className: \"jsx-2224040409\"\n  }, Object.entries(users).length !== 0 && users.map(user => __jsx(\"tr\", {\n    key: user._id,\n    className: \"jsx-2224040409\"\n  }, __jsx(\"td\", {\n    className: \"jsx-2224040409\"\n  }, user.name), __jsx(\"td\", {\n    className: \"jsx-2224040409\"\n  }, user.email)))))), __jsx(_JSXStyle, {\n    id: \"2224040409\"\n  }, \"main.jsx-2224040409{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}@media (max-width:720px){main.jsx-2224040409{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}}table.jsx-2224040409,form.jsx-2224040409{width:100%;margin:2rem auto;background:#000;padding:2rem;border:none;border-radius:5px;}thead.jsx-2224040409{background:#222;color:#fff;}tbody.jsx-2224040409{background:#dedede;color:#333;}th.jsx-2224040409,td.jsx-2224040409{border-radius:2px;padding:0.5rem 1rem;border:none;box-shadow:0 0 7px rgba(0,0,0,0.3);}form.jsx-2224040409{width:100%;margin:2rem auto;background:#dedede;padding:2rem;}input.jsx-2224040409{width:100%;padding:0.7rem 1rem;border:none;border-radius:5px;margin:0.5rem 0;}p.jsx-2224040409{color:green;text-transform:uppercase;font-size:1rem;margin:.5rem;text-align:center;}button.jsx-2224040409{padding:0.7rem 1rem;background:black;border:none;color:white;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL21pa2UvRGVza3RvcC9sZWFybmluZy9uZXh0anMtdGVzdC9wYWdlcy9jdXN0b20tc2VydmVyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQTJGYSxBQUc4QixBQUlXLEFBS2IsQUFRSyxBQUlHLEFBS0QsQUFNUCxBQU1BLEFBT0MsQUFPUSxXQTFDSCxBQXVCQSxBQU1HLENBT0ssSUE1QmQsRUFTUyxDQUxULENBK0JNLE9BbENuQixDQVJrQixBQXVCRyxFQVhyQixDQWlCYyxNQU9HLEFBT0gsQ0ExQkEsS0FhTSxDQTdCTCxHQXVCQSxFQW9CRCxDQTFCMEIsRUFtQnpCLEtBbkNELEdBdUJkLENBTWtCLEFBY2xCLElBUG9CLElBbkNBLEtBYnBCLEdBMENBLENBdENFLEtBNkNGLEVBcEJBLEVBZkEiLCJmaWxlIjoiL2hvbWUvbWlrZS9EZXNrdG9wL2xlYXJuaW5nL25leHRqcy10ZXN0L3BhZ2VzL2N1c3RvbS1zZXJ2ZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgTGF5b3V0IGZyb20gJy4uL2NvbXBvbmVudHMvTXlMYXlvdXQnO1xuaW1wb3J0IEhlYWQgZnJvbSAnbmV4dC9oZWFkJztcbmltcG9ydCBmZXRjaCBmcm9tICdpc29tb3JwaGljLXVuZmV0Y2gnO1xuaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJztcbmltcG9ydCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCc7XG5cbmNvbnN0IEN1c3RvbVNlcnZlciA9ICh7IGRhdGEgfSkgPT4ge1xuXG4gIGNvbnN0IFt1c2Vycywgc2V0VXNlcnNdID0gdXNlU3RhdGUoe30pO1xuICBjb25zb2xlLmxvZyhPYmplY3QuZW50cmllcyhkYXRhKS5sZW5ndGggPT09IDApO1xuICBjb25zdCBbc3RhdGUsIHNldFN0YXRlXSA9IHVzZVN0YXRlKHtcbiAgICBuYW1lOiAnJyxcbiAgICBlbWFpbDogJycsXG4gICAgbXNnOiAnJ1xuICB9KTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHNldFVzZXJzKGRhdGEpO1xuICAgIGlmIChzdGF0ZS5tc2cpIHtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBzZXRTdGF0ZSh7IG1zZzogJyd9KTtcbiAgICAgIH0sIDMwMDApO1xuICAgIH1cbiAgfSwgW3N0YXRlLm1zZywgZGF0YSwgdXNlcnNdKTtcblxuICBjb25zdCBmZXRjaERhdGEgPSBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgeyBuYW1lLCBlbWFpbCB9ID0gc3RhdGU7XG4gICAgaWYoIXN0YXRlLm5hbWUgfHwgIXN0YXRlLmVtYWlsICkgcmV0dXJuO1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MucG9zdCgnL2F1dGgnLCB7IG5hbWUsIGVtYWlsIH0pO1xuICAgIHNldFN0YXRlKHsgbXNnOiByZXNwb25zZS5kYXRhLm1lc3NhZ2V9KTtcbiAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7XG4gIH07XG5cbiAgZnVuY3Rpb24gaGFuZGxlU3VibWl0KGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgZmV0Y2hEYXRhKCk7XG4gICAgc2V0U3RhdGUoeyBuYW1lOiAnJywgZW1haWw6ICcnfSk7XG4gIH1cblxuICBmdW5jdGlvbiBoYW5kbGVDaGFuZ2UoZSkge1xuICAgIHNldFN0YXRlKHsuLi5zdGF0ZSwgW2UudGFyZ2V0Lm5hbWVdOiBlLnRhcmdldC52YWx1ZSB9KTtcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPD5cbiAgICAgIDxIZWFkPlxuICAgICAgICA8dGl0bGU+Q3VzdG9tIHNlcnZlcjwvdGl0bGU+XG4gICAgICAgIDxtZXRhIG5hbWU9XCJkZXNjcmlwdGlvblwiIGNvbnRlbnQ9XCJ0aGlzIGlzIGEgdHYgcm91dGVcIiAvPlxuICAgICAgPC9IZWFkPlxuICAgICAgPExheW91dD5cbiAgICAgICAgPGRpdj5cbiAgICAgICAgICA8aDI+Q3VzdG9tIFNlcnZlcjwvaDI+XG4gICAgICAgICAgPG1haW4+XG4gICAgICAgICAgICA8Zm9ybSBvblN1Ym1pdD17aGFuZGxlU3VibWl0fT5cbiAgICAgICAgICAgICAgPGxhYmVsIGh0bWxGb3I9XCJuYW1lXCI+TmFtZTogPC9sYWJlbD5cbiAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgICAgIGlkPVwibmFtZVwiXG4gICAgICAgICAgICAgICAgbmFtZT1cIm5hbWVcIlxuICAgICAgICAgICAgICAgIHZhbHVlPXtzdGF0ZS5uYW1lfVxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVDaGFuZ2V9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDxsYWJlbCBodG1sRm9yPVwiZW1haWxcIj5FbWFpbDogPC9sYWJlbD5cbiAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgdHlwZT1cImVtYWlsXCJcbiAgICAgICAgICAgICAgICBpZD1cImVtYWlsXCJcbiAgICAgICAgICAgICAgICBuYW1lPVwiZW1haWxcIlxuICAgICAgICAgICAgICAgIHZhbHVlPXtzdGF0ZS5lbWFpbH1cbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17aGFuZGxlQ2hhbmdlfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJzdWJtaXRcIj5TYXZlIGRhdGE8L2J1dHRvbj5cbiAgICAgICAgICAgICAge3N0YXRlLm1zZyAmJiA8cD57c3RhdGUubXNnfTwvcD59XG4gICAgICAgICAgICA8L2Zvcm0+XG4gICAgICAgICAgICA8dGFibGUgYm9yZGVyPVwiMVwiPlxuICAgICAgICAgICAgICA8dGhlYWQ+XG4gICAgICAgICAgICAgICAgPHRyPlxuICAgICAgICAgICAgICAgICAgPHRoPlVTRVJTPC90aD5cbiAgICAgICAgICAgICAgICAgIDx0aD5APC90aD5cbiAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgICA8L3RoZWFkPlxuICAgICAgICAgICAgICA8dGJvZHk+XG4gICAgICAgICAgICAgICAge09iamVjdC5lbnRyaWVzKHVzZXJzKS5sZW5ndGggIT09IDAgJiYgdXNlcnMubWFwKCh1c2VyKSA9PiAoXG4gICAgICAgICAgICAgICAgICA8dHIga2V5PXt1c2VyLl9pZH0+XG4gICAgICAgICAgICAgICAgICAgIDx0ZD57dXNlci5uYW1lfTwvdGQ+XG4gICAgICAgICAgICAgICAgICAgIDx0ZD57dXNlci5lbWFpbH08L3RkPlxuICAgICAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgPC90Ym9keT5cbiAgICAgICAgICAgIDwvdGFibGU+XG4gICAgICAgICAgPC9tYWluPlxuICAgICAgICAgIDxzdHlsZSBqc3g+XG4gICAgICAgICAgICB7YFxuICAgICAgICAgICAgICBtYWluIHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIEBtZWRpYSAobWF4LXdpZHRoOiA3MjBweCkge1xuICAgICAgICAgICAgICAgIG1haW4ge1xuICAgICAgICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgdGFibGUsXG4gICAgICAgICAgICAgIGZvcm0ge1xuICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgICAgIG1hcmdpbjogMnJlbSBhdXRvO1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6ICMwMDA7XG4gICAgICAgICAgICAgICAgcGFkZGluZzogMnJlbTtcbiAgICAgICAgICAgICAgICBib3JkZXI6IG5vbmU7XG4gICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNXB4O1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHRoZWFkIHtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAjMjIyO1xuICAgICAgICAgICAgICAgIGNvbG9yOiAjZmZmO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHRib2R5IHtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZGVkZWRlO1xuICAgICAgICAgICAgICAgIGNvbG9yOiAjMzMzO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHRoLFxuICAgICAgICAgICAgICB0ZCB7XG4gICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMnB4O1xuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDAuNXJlbSAxcmVtO1xuICAgICAgICAgICAgICAgIGJvcmRlcjogbm9uZTtcbiAgICAgICAgICAgICAgICBib3gtc2hhZG93OiAwIDAgN3B4IHJnYmEoMCwgMCwgMCwgMC4zKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBmb3JtIHtcbiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgICAgICBtYXJnaW46IDJyZW0gYXV0bztcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZGVkZWRlO1xuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDJyZW07XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaW5wdXQge1xuICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDAuN3JlbSAxcmVtO1xuICAgICAgICAgICAgICAgIGJvcmRlcjogbm9uZTtcbiAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1cHg7XG4gICAgICAgICAgICAgICAgbWFyZ2luOiAwLjVyZW0gMDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBwIHtcbiAgICAgICAgICAgICAgICBjb2xvcjogZ3JlZW47XG4gICAgICAgICAgICAgICAgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTtcbiAgICAgICAgICAgICAgICBmb250LXNpemU6IDFyZW07XG4gICAgICAgICAgICAgICAgbWFyZ2luOiAuNXJlbTtcbiAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgYnV0dG9uIHtcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiAwLjdyZW0gMXJlbTtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiBibGFjaztcbiAgICAgICAgICAgICAgICBib3JkZXI6IG5vbmU7XG4gICAgICAgICAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBgfVxuICAgICAgICAgIDwvc3R5bGU+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9MYXlvdXQ+XG4gICAgPC8+XG4gICk7XG59O1xuXG5DdXN0b21TZXJ2ZXIuZ2V0SW5pdGlhbFByb3BzID0gYXN5bmMgKGN0eCkgPT4ge1xuICBjb25zdCB1cmwgPSBgJHtwcm9jZXNzLmVudi5VUkx9L2F1dGhgO1xuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCk7XG4gIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgcmV0dXJuIHsgZGF0YSB9O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgQ3VzdG9tU2VydmVyO1xuIl19 */\\n/*@ sourceURL=/home/mike/Desktop/learning/nextjs-test/pages/custom-server.js */\"))));\n};\n\nCustomServer.getInitialProps = async ctx => {\n  const url = `${process.env.URL}/auth`;\n  const response = await fetch(url);\n  const data = await response.json();\n  return {\n    data\n  };\n};\n\nexport default CustomServer;","map":{"version":3,"sources":["/home/mike/Desktop/learning/nextjs-test/pages/custom-server.js"],"names":["Layout","Head","fetch","axios","useState","useEffect","CustomServer","data","users","setUsers","console","log","Object","entries","length","state","setState","name","email","msg","setTimeout","fetchData","response","post","message","handleSubmit","e","preventDefault","handleChange","target","value","map","user","_id","getInitialProps","ctx","url","process","env","URL","json"],"mappings":"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","sourcesContent":["import Layout from '../components/MyLayout';\nimport Head from 'next/head';\nimport fetch from 'isomorphic-unfetch';\nimport axios from 'axios';\nimport { useState, useEffect } from 'react';\n\nconst CustomServer = ({ data }) => {\n\n  const [users, setUsers] = useState({});\n  console.log(Object.entries(data).length === 0);\n  const [state, setState] = useState({\n    name: '',\n    email: '',\n    msg: ''\n  });\n\n  useEffect(() => {\n    setUsers(data);\n    if (state.msg) {\n      setTimeout(() => {\n        setState({ msg: ''});\n      }, 3000);\n    }\n  }, [state.msg, data, users]);\n\n  const fetchData = async () => {\n    const { name, email } = state;\n    if(!state.name || !state.email ) return;\n    const response = await axios.post('/auth', { name, email });\n    setState({ msg: response.data.message});\n    console.log(response);\n  };\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    fetchData();\n    setState({ name: '', email: ''});\n  }\n\n  function handleChange(e) {\n    setState({...state, [e.target.name]: e.target.value });\n  }\n\n  return (\n    <>\n      <Head>\n        <title>Custom server</title>\n        <meta name=\"description\" content=\"this is a tv route\" />\n      </Head>\n      <Layout>\n        <div>\n          <h2>Custom Server</h2>\n          <main>\n            <form onSubmit={handleSubmit}>\n              <label htmlFor=\"name\">Name: </label>\n              <input\n                type=\"text\"\n                id=\"name\"\n                name=\"name\"\n                value={state.name}\n                onChange={handleChange}\n              />\n              <label htmlFor=\"email\">Email: </label>\n              <input\n                type=\"email\"\n                id=\"email\"\n                name=\"email\"\n                value={state.email}\n                onChange={handleChange}\n              />\n              <button type=\"submit\">Save data</button>\n              {state.msg && <p>{state.msg}</p>}\n            </form>\n            <table border=\"1\">\n              <thead>\n                <tr>\n                  <th>USERS</th>\n                  <th>@</th>\n                </tr>\n              </thead>\n              <tbody>\n                {Object.entries(users).length !== 0 && users.map((user) => (\n                  <tr key={user._id}>\n                    <td>{user.name}</td>\n                    <td>{user.email}</td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </main>\n          <style jsx>\n            {`\n              main {\n                display: flex;\n              }\n              @media (max-width: 720px) {\n                main {\n                  flex-direction: column;\n                }\n              }\n              table,\n              form {\n                width: 100%;\n                margin: 2rem auto;\n                background: #000;\n                padding: 2rem;\n                border: none;\n                border-radius: 5px;\n              }\n              thead {\n                background: #222;\n                color: #fff;\n              }\n              tbody {\n                background: #dedede;\n                color: #333;\n              }\n              th,\n              td {\n                border-radius: 2px;\n                padding: 0.5rem 1rem;\n                border: none;\n                box-shadow: 0 0 7px rgba(0, 0, 0, 0.3);\n              }\n              form {\n                width: 100%;\n                margin: 2rem auto;\n                background: #dedede;\n                padding: 2rem;\n              }\n              input {\n                width: 100%;\n                padding: 0.7rem 1rem;\n                border: none;\n                border-radius: 5px;\n                margin: 0.5rem 0;\n              }\n              p {\n                color: green;\n                text-transform: uppercase;\n                font-size: 1rem;\n                margin: .5rem;\n                text-align: center;\n              }\n              button {\n                padding: 0.7rem 1rem;\n                background: black;\n                border: none;\n                color: white;\n              }\n            `}\n          </style>\n        </div>\n      </Layout>\n    </>\n  );\n};\n\nCustomServer.getInitialProps = async (ctx) => {\n  const url = `${process.env.URL}/auth`;\n  const response = await fetch(url);\n  const data = await response.json();\n\n  return { data };\n};\n\nexport default CustomServer;\n"]},"metadata":{},"sourceType":"module"}