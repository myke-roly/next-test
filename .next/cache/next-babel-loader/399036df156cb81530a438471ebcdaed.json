{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { useState, useEffect } from 'react';\nimport Layout from '../components/MyLayout';\nimport Head from 'next/head';\nimport fetch from 'isomorphic-unfetch';\nimport axios from 'axios';\n\nvar CustomServer = function CustomServer() {\n  var _useState = useState({\n    name: '',\n    email: '',\n    msg: null\n  }),\n      state = _useState[0],\n      setState = _useState[1];\n\n  var _useState2 = useState([]),\n      data = _useState2[0],\n      setData = _useState2[1];\n\n  var getUsers = function getUsers() {\n    var response, users;\n    return _regeneratorRuntime.async(function getUsers$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(fetch(\"\".concat(process.env.URL, \"/api/auth\")));\n\n          case 2:\n            response = _context.sent;\n            _context.next = 5;\n            return _regeneratorRuntime.awrap(response.json());\n\n          case 5:\n            users = _context.sent;\n            if (response.status === 200) setData(users);\n\n          case 7:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  useEffect(function () {\n    getUsers();\n\n    if (state.msg) {\n      setTimeout(function () {\n        setState({\n          msg: ''\n        });\n      }, 3000);\n    }\n  }, [state.msg]);\n\n  var fetchData = function fetchData() {\n    var name, email, response;\n    return _regeneratorRuntime.async(function fetchData$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            name = state.name, email = state.email;\n\n            if (!(!state.name || !state.email)) {\n              _context2.next = 3;\n              break;\n            }\n\n            return _context2.abrupt(\"return\");\n\n          case 3:\n            _context2.next = 5;\n            return _regeneratorRuntime.awrap(axios.post(\"\".concat(process.env.URL, \"/api/auth\"), {\n              name: name,\n              email: email\n            }));\n\n          case 5:\n            response = _context2.sent;\n            setState({\n              msg: response.data.message\n            });\n\n          case 7:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var deletedUser = function deletedUser(id) {\n    return _regeneratorRuntime.async(function deletedUser$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.next = 2;\n            return _regeneratorRuntime.awrap(axios[\"delete\"](\"\".concat(process.env.URL, \"/api/auth/\").concat(id)));\n\n          case 2:\n            getUsers();\n\n          case 3:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    fetchData();\n    setState({\n      name: '',\n      email: ''\n    });\n  }\n\n  function handleChange(e) {\n    setState(_objectSpread({}, state, _defineProperty({}, e.target.name, e.target.value)));\n  }\n\n  return __jsx(React.Fragment, null, __jsx(Head, null, __jsx(\"title\", null, \"Custom server\"), __jsx(\"meta\", {\n    name: \"description\",\n    content: \"this is a tv route\"\n  })), __jsx(Layout, null, __jsx(\"main\", {\n    className: \"jsx-3021649423\"\n  }, __jsx(\"form\", {\n    onSubmit: handleSubmit,\n    className: \"jsx-3021649423\"\n  }, __jsx(\"h2\", {\n    className: \"jsx-3021649423\"\n  }, \"User List\"), state.msg && __jsx(\"p\", {\n    className: \"jsx-3021649423\"\n  }, state.msg), __jsx(\"label\", {\n    htmlFor: \"name\",\n    className: \"jsx-3021649423\"\n  }, \"Name: \"), __jsx(\"input\", {\n    type: \"text\",\n    id: \"name\",\n    name: \"name\",\n    value: state.name,\n    onChange: handleChange,\n    placeholder: \"No ingresar datos validos ahre!!\",\n    className: \"jsx-3021649423\"\n  }), __jsx(\"label\", {\n    htmlFor: \"email\",\n    className: \"jsx-3021649423\"\n  }, \"Email: \"), __jsx(\"input\", {\n    type: \"email\",\n    id: \"email\",\n    name: \"email\",\n    value: state.email,\n    onChange: handleChange,\n    className: \"jsx-3021649423\"\n  }), __jsx(\"button\", {\n    type: \"submit\",\n    className: \"jsx-3021649423\"\n  }, \"Save data\")), __jsx(\"table\", {\n    border: \"1\",\n    className: \"jsx-3021649423\"\n  }, __jsx(\"thead\", {\n    className: \"jsx-3021649423\"\n  }, __jsx(\"tr\", {\n    className: \"jsx-3021649423\"\n  }, __jsx(\"th\", {\n    className: \"jsx-3021649423\"\n  }, \"USERS\"), __jsx(\"th\", {\n    className: \"jsx-3021649423\"\n  }, \"@\"))), __jsx(\"tbody\", {\n    className: \"jsx-3021649423\"\n  }, data && data.map(function (user) {\n    return __jsx(\"tr\", {\n      key: user._id,\n      className: \"jsx-3021649423\"\n    }, __jsx(\"td\", {\n      className: \"jsx-3021649423\"\n    }, user.name), __jsx(\"td\", {\n      className: \"jsx-3021649423\"\n    }, user.email, __jsx(\"span\", {\n      onClick: function onClick() {\n        return deletedUser(user._id);\n      },\n      className: \"jsx-3021649423\" + \" \" + \"delete\"\n    }, \"X\")));\n  })))), __jsx(_JSXStyle, {\n    id: \"3021649423\"\n  }, \"main.jsx-3021649423{width:100%;display:grid;grid-template-columns:repeat(auto-fill,minmax(370px,1fr));grid-gap:1rem;font-family:sans-serif;}@media (max-width:720px){main.jsx-3021649423{font-size:14px;}}h2.jsx-3021649423{color:#555;margin-bottom:1rem;}table.jsx-3021649423{grid-column-end:span 1.5;}table.jsx-3021649423,form.jsx-3021649423{width:100%;margin:2rem auto;background:#dedede;padding:1rem;border:none;border-radius:5px;box-shadow:0 0 7px rgba(0,0,0,0.3);}thead.jsx-3021649423{background:#000;color:#fff;}tbody.jsx-3021649423{background:#efefef;color:#333;}th.jsx-3021649423{padding:1rem;}td.jsx-3021649423{padding:0.7rem 1rem;border:5px solid #dedede;border-radius:5px;}form.jsx-3021649423{width:100%;margin:2rem auto;background:#dedede;padding:2rem;}input.jsx-3021649423{width:100%;padding:0.7rem 1rem;border:none;border-radius:5px;margin:0.5rem 0;}p.jsx-3021649423{color:green;text-transform:uppercase;font-size:1rem;margin:0.5rem;text-align:center;}button.jsx-3021649423{padding:0.7rem 1rem;background:black;border:none;color:white;}.delete.jsx-3021649423{float:right;color:#C01D3A;cursor:pointer;font-weight:bold;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL21pa2UvRGVza3RvcC9sZWFybmluZy9uZXh0anMtdGVzdC9wYWdlcy9jdXN0b20tc2VydmVyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQTBHVyxBQUcwQixBQVFNLEFBSU4sQUFJYyxBQUlkLEFBU0ssQUFJRyxBQUlOLEFBR08sQUFNVCxBQU1BLEFBT0MsQUFPUSxBQU1SLFdBdkVDLEFBWU0sQUFRRixBQTBCQSxBQU1HLENBT0ssQUFhWCxDQW5DaEIsRUE3QkUsQ0FxQlcsR0FJQSxDQVFjLEFBeUJSLElBakUyQyxDQWU5RCxDQXlEaUIsQ0EzQ2pCLENBVHFCLEFBMEJBLEVBbENyQixBQXFCQSxDQW1CYyxNQU9HLEFBT0gsSUFPSyxFQXBCQyxFQVpBLEVBcEJMLEFBMEJBLEVBb0JELEdBUEUsTUFjaEIsRUFwRGMsQUEwQmQsQ0FNa0IsQUFjbEIsRUExQkEsR0FtQm9CLE1BdENBLEtBZ0NwQixLQXREZ0IsRUE2RGhCLE1BdEN3QyxNQXRCZix1QkFDekIsTUFzQkEiLCJmaWxlIjoiL2hvbWUvbWlrZS9EZXNrdG9wL2xlYXJuaW5nL25leHRqcy10ZXN0L3BhZ2VzL2N1c3RvbS1zZXJ2ZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IExheW91dCBmcm9tICcuLi9jb21wb25lbnRzL015TGF5b3V0JztcbmltcG9ydCBIZWFkIGZyb20gJ25leHQvaGVhZCc7XG5pbXBvcnQgZmV0Y2ggZnJvbSAnaXNvbW9ycGhpYy11bmZldGNoJztcbmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7XG5cbmNvbnN0IEN1c3RvbVNlcnZlciA9ICgpID0+IHtcblxuICBjb25zdCBbc3RhdGUsIHNldFN0YXRlXSA9IHVzZVN0YXRlKHtcbiAgICBuYW1lOiAnJyxcbiAgICBlbWFpbDogJycsXG4gICAgbXNnOiBudWxsLFxuICB9KTtcblxuICBjb25zdCBbZGF0YSwgc2V0RGF0YV0gPSB1c2VTdGF0ZShbXSk7XG5cbiAgY29uc3QgZ2V0VXNlcnMgPSBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHtwcm9jZXNzLmVudi5VUkx9L2FwaS9hdXRoYCk7XG4gICAgY29uc3QgdXNlcnMgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwKSBzZXREYXRhKHVzZXJzKTtcbiAgfTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGdldFVzZXJzKCk7XG5cbiAgICBpZiAoc3RhdGUubXNnKSB7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgc2V0U3RhdGUoeyBtc2c6ICcnIH0pO1xuICAgICAgfSwgMzAwMCk7XG4gICAgfVxuICB9LCBbc3RhdGUubXNnXSk7XG5cbiAgY29uc3QgZmV0Y2hEYXRhID0gYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHsgbmFtZSwgZW1haWwgfSA9IHN0YXRlO1xuICAgIGlmICghc3RhdGUubmFtZSB8fCAhc3RhdGUuZW1haWwpIHJldHVybjtcblxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MucG9zdChgJHtwcm9jZXNzLmVudi5VUkx9L2FwaS9hdXRoYCwgeyBuYW1lLCBlbWFpbCB9KTtcbiAgICBzZXRTdGF0ZSh7IG1zZzogcmVzcG9uc2UuZGF0YS5tZXNzYWdlIH0pO1xuICB9O1xuXG4gIGNvbnN0IGRlbGV0ZWRVc2VyID0gYXN5bmMgKGlkKSA9PiB7XG4gICAgYXdhaXQgYXhpb3MuZGVsZXRlKGAke3Byb2Nlc3MuZW52LlVSTH0vYXBpL2F1dGgvJHtpZH1gKTtcbiAgICBnZXRVc2VycygpO1xuICB9XG5cbiAgZnVuY3Rpb24gaGFuZGxlU3VibWl0KGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgZmV0Y2hEYXRhKCk7XG4gICAgc2V0U3RhdGUoeyBuYW1lOiAnJywgZW1haWw6ICcnIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gaGFuZGxlQ2hhbmdlKGUpIHtcbiAgICBzZXRTdGF0ZSh7IC4uLnN0YXRlLCBbZS50YXJnZXQubmFtZV06IGUudGFyZ2V0LnZhbHVlIH0pO1xuICB9XG5cbiAgcmV0dXJuIChcbiAgICA8PlxuICAgICAgPEhlYWQ+XG4gICAgICAgIDx0aXRsZT5DdXN0b20gc2VydmVyPC90aXRsZT5cbiAgICAgICAgPG1ldGEgbmFtZT1cImRlc2NyaXB0aW9uXCIgY29udGVudD1cInRoaXMgaXMgYSB0diByb3V0ZVwiIC8+XG4gICAgICA8L0hlYWQ+XG4gICAgICA8TGF5b3V0PlxuICAgICAgICA8bWFpbj5cbiAgICAgICAgICA8Zm9ybSBvblN1Ym1pdD17aGFuZGxlU3VibWl0fT5cbiAgICAgICAgICAgIDxoMj5Vc2VyIExpc3Q8L2gyPlxuICAgICAgICAgICAge3N0YXRlLm1zZyAmJiA8cD57c3RhdGUubXNnfTwvcD59XG4gICAgICAgICAgICA8bGFiZWwgaHRtbEZvcj1cIm5hbWVcIj5OYW1lOiA8L2xhYmVsPlxuICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgICAgICAgaWQ9XCJuYW1lXCJcbiAgICAgICAgICAgICAgbmFtZT1cIm5hbWVcIlxuICAgICAgICAgICAgICB2YWx1ZT17c3RhdGUubmFtZX1cbiAgICAgICAgICAgICAgb25DaGFuZ2U9e2hhbmRsZUNoYW5nZX1cbiAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJObyBpbmdyZXNhciBkYXRvcyB2YWxpZG9zIGFocmUhIVwiXG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPGxhYmVsIGh0bWxGb3I9XCJlbWFpbFwiPkVtYWlsOiA8L2xhYmVsPlxuICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgIHR5cGU9XCJlbWFpbFwiXG4gICAgICAgICAgICAgIGlkPVwiZW1haWxcIlxuICAgICAgICAgICAgICBuYW1lPVwiZW1haWxcIlxuICAgICAgICAgICAgICB2YWx1ZT17c3RhdGUuZW1haWx9XG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVDaGFuZ2V9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwic3VibWl0XCI+U2F2ZSBkYXRhPC9idXR0b24+XG4gICAgICAgICAgPC9mb3JtPlxuICAgICAgICAgIDx0YWJsZSBib3JkZXI9XCIxXCI+XG4gICAgICAgICAgICA8dGhlYWQ+XG4gICAgICAgICAgICAgIDx0cj5cbiAgICAgICAgICAgICAgICA8dGg+VVNFUlM8L3RoPlxuICAgICAgICAgICAgICAgIDx0aD5APC90aD5cbiAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgIDwvdGhlYWQ+XG4gICAgICAgICAgICA8dGJvZHk+XG4gICAgICAgICAgICAgIHtkYXRhICYmXG4gICAgICAgICAgICAgICAgZGF0YS5tYXAoKHVzZXIpID0+IChcbiAgICAgICAgICAgICAgICAgIDx0ciBrZXk9e3VzZXIuX2lkfT5cbiAgICAgICAgICAgICAgICAgICAgPHRkPnt1c2VyLm5hbWV9PC90ZD5cbiAgICAgICAgICAgICAgICAgICAgPHRkPnt1c2VyLmVtYWlsfSBcbiAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJkZWxldGVcIiBvbkNsaWNrPXsoKSA9PiBkZWxldGVkVXNlcih1c2VyLl9pZCl9Plg8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgPC90Ym9keT5cbiAgICAgICAgICA8L3RhYmxlPlxuICAgICAgICA8L21haW4+XG4gICAgICAgIDxzdHlsZSBqc3g+XG4gICAgICAgICAge2BcbiAgICAgICAgICAgIG1haW4ge1xuICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgICAgZGlzcGxheTogZ3JpZDtcbiAgICAgICAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoYXV0by1maWxsLCBtaW5tYXgoMzcwcHgsIDFmcikpO1xuICAgICAgICAgICAgICBncmlkLWdhcDogMXJlbTtcbiAgICAgICAgICAgICAgZm9udC1mYW1pbHk6IHNhbnMtc2VyaWY7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBAbWVkaWEgKG1heC13aWR0aDogNzIwcHgpIHtcbiAgICAgICAgICAgICAgbWFpbiB7XG4gICAgICAgICAgICAgICAgZm9udC1zaXplOiAxNHB4O1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBoMiB7XG4gICAgICAgICAgICAgIGNvbG9yOiAjNTU1O1xuICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxcmVtO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGFibGUge1xuICAgICAgICAgICAgICBncmlkLWNvbHVtbi1lbmQ6IHNwYW4gMS41O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGFibGUsXG4gICAgICAgICAgICBmb3JtIHtcbiAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICAgIG1hcmdpbjogMnJlbSBhdXRvO1xuICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZGVkZWRlO1xuICAgICAgICAgICAgICBwYWRkaW5nOiAxcmVtO1xuICAgICAgICAgICAgICBib3JkZXI6IG5vbmU7XG4gICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDVweDtcbiAgICAgICAgICAgICAgYm94LXNoYWRvdzogMCAwIDdweCByZ2JhKDAsIDAsIDAsIDAuMyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGVhZCB7XG4gICAgICAgICAgICAgIGJhY2tncm91bmQ6ICMwMDA7XG4gICAgICAgICAgICAgIGNvbG9yOiAjZmZmO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGJvZHkge1xuICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZWZlZmVmO1xuICAgICAgICAgICAgICBjb2xvcjogIzMzMztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoIHtcbiAgICAgICAgICAgICAgcGFkZGluZzogMXJlbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRkIHtcbiAgICAgICAgICAgICAgcGFkZGluZzogMC43cmVtIDFyZW07XG4gICAgICAgICAgICAgIC8vIGJvcmRlcjogbm9uZTtcbiAgICAgICAgICAgICAgYm9yZGVyOiA1cHggc29saWQgI2RlZGVkZTtcbiAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNXB4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9ybSB7XG4gICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgICBtYXJnaW46IDJyZW0gYXV0bztcbiAgICAgICAgICAgICAgYmFja2dyb3VuZDogI2RlZGVkZTtcbiAgICAgICAgICAgICAgcGFkZGluZzogMnJlbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlucHV0IHtcbiAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICAgIHBhZGRpbmc6IDAuN3JlbSAxcmVtO1xuICAgICAgICAgICAgICBib3JkZXI6IG5vbmU7XG4gICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDVweDtcbiAgICAgICAgICAgICAgbWFyZ2luOiAwLjVyZW0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHAge1xuICAgICAgICAgICAgICBjb2xvcjogZ3JlZW47XG4gICAgICAgICAgICAgIHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7XG4gICAgICAgICAgICAgIGZvbnQtc2l6ZTogMXJlbTtcbiAgICAgICAgICAgICAgbWFyZ2luOiAwLjVyZW07XG4gICAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJ1dHRvbiB7XG4gICAgICAgICAgICAgIHBhZGRpbmc6IDAuN3JlbSAxcmVtO1xuICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiBibGFjaztcbiAgICAgICAgICAgICAgYm9yZGVyOiBub25lO1xuICAgICAgICAgICAgICBjb2xvcjogd2hpdGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAuZGVsZXRlIHtcbiAgICAgICAgICAgICAgZmxvYXQ6IHJpZ2h0O1xuICAgICAgICAgICAgICBjb2xvcjogI0MwMUQzQTtcbiAgICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICBgfVxuICAgICAgICA8L3N0eWxlPlxuICAgICAgPC9MYXlvdXQ+XG4gICAgPC8+XG4gICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBDdXN0b21TZXJ2ZXI7XG4iXX0= */\\n/*@ sourceURL=/home/mike/Desktop/learning/nextjs-test/pages/custom-server.js */\")));\n};\n\nexport default CustomServer;","map":{"version":3,"sources":["/home/mike/Desktop/learning/nextjs-test/pages/custom-server.js"],"names":["useState","useEffect","Layout","Head","fetch","axios","CustomServer","name","email","msg","state","setState","data","setData","getUsers","process","env","URL","response","json","users","status","setTimeout","fetchData","post","message","deletedUser","id","handleSubmit","e","preventDefault","handleChange","target","value","map","user","_id"],"mappings":"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","sourcesContent":["import { useState, useEffect } from 'react';\nimport Layout from '../components/MyLayout';\nimport Head from 'next/head';\nimport fetch from 'isomorphic-unfetch';\nimport axios from 'axios';\n\nconst CustomServer = () => {\n\n  const [state, setState] = useState({\n    name: '',\n    email: '',\n    msg: null,\n  });\n\n  const [data, setData] = useState([]);\n\n  const getUsers = async () => {\n    const response = await fetch(`${process.env.URL}/api/auth`);\n    const users = await response.json();\n    if (response.status === 200) setData(users);\n  };\n\n  useEffect(() => {\n    getUsers();\n\n    if (state.msg) {\n      setTimeout(() => {\n        setState({ msg: '' });\n      }, 3000);\n    }\n  }, [state.msg]);\n\n  const fetchData = async () => {\n    const { name, email } = state;\n    if (!state.name || !state.email) return;\n\n    const response = await axios.post(`${process.env.URL}/api/auth`, { name, email });\n    setState({ msg: response.data.message });\n  };\n\n  const deletedUser = async (id) => {\n    await axios.delete(`${process.env.URL}/api/auth/${id}`);\n    getUsers();\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    fetchData();\n    setState({ name: '', email: '' });\n  }\n\n  function handleChange(e) {\n    setState({ ...state, [e.target.name]: e.target.value });\n  }\n\n  return (\n    <>\n      <Head>\n        <title>Custom server</title>\n        <meta name=\"description\" content=\"this is a tv route\" />\n      </Head>\n      <Layout>\n        <main>\n          <form onSubmit={handleSubmit}>\n            <h2>User List</h2>\n            {state.msg && <p>{state.msg}</p>}\n            <label htmlFor=\"name\">Name: </label>\n            <input\n              type=\"text\"\n              id=\"name\"\n              name=\"name\"\n              value={state.name}\n              onChange={handleChange}\n              placeholder=\"No ingresar datos validos ahre!!\"\n            />\n            <label htmlFor=\"email\">Email: </label>\n            <input\n              type=\"email\"\n              id=\"email\"\n              name=\"email\"\n              value={state.email}\n              onChange={handleChange}\n            />\n            <button type=\"submit\">Save data</button>\n          </form>\n          <table border=\"1\">\n            <thead>\n              <tr>\n                <th>USERS</th>\n                <th>@</th>\n              </tr>\n            </thead>\n            <tbody>\n              {data &&\n                data.map((user) => (\n                  <tr key={user._id}>\n                    <td>{user.name}</td>\n                    <td>{user.email} \n                      <span className=\"delete\" onClick={() => deletedUser(user._id)}>X</span>\n                    </td>\n                  </tr>\n                ))}\n            </tbody>\n          </table>\n        </main>\n        <style jsx>\n          {`\n            main {\n              width: 100%;\n              display: grid;\n              grid-template-columns: repeat(auto-fill, minmax(370px, 1fr));\n              grid-gap: 1rem;\n              font-family: sans-serif;\n            }\n            @media (max-width: 720px) {\n              main {\n                font-size: 14px;\n              }\n            }\n            h2 {\n              color: #555;\n              margin-bottom: 1rem;\n            }\n            table {\n              grid-column-end: span 1.5;\n            }\n            table,\n            form {\n              width: 100%;\n              margin: 2rem auto;\n              background: #dedede;\n              padding: 1rem;\n              border: none;\n              border-radius: 5px;\n              box-shadow: 0 0 7px rgba(0, 0, 0, 0.3);\n            }\n            thead {\n              background: #000;\n              color: #fff;\n            }\n            tbody {\n              background: #efefef;\n              color: #333;\n            }\n            th {\n              padding: 1rem;\n            }\n            td {\n              padding: 0.7rem 1rem;\n              // border: none;\n              border: 5px solid #dedede;\n              border-radius: 5px;\n            }\n            form {\n              width: 100%;\n              margin: 2rem auto;\n              background: #dedede;\n              padding: 2rem;\n            }\n            input {\n              width: 100%;\n              padding: 0.7rem 1rem;\n              border: none;\n              border-radius: 5px;\n              margin: 0.5rem 0;\n            }\n            p {\n              color: green;\n              text-transform: uppercase;\n              font-size: 1rem;\n              margin: 0.5rem;\n              text-align: center;\n            }\n            button {\n              padding: 0.7rem 1rem;\n              background: black;\n              border: none;\n              color: white;\n            }\n            .delete {\n              float: right;\n              color: #C01D3A;\n              cursor: pointer;\n              font-weight: bold;\n            }\n          `}\n        </style>\n      </Layout>\n    </>\n  );\n};\n\nexport default CustomServer;\n"]},"metadata":{},"sourceType":"module"}