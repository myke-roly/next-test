{"ast":null,"code":"import allQuotes from '../../quotes.json';\nimport Cors from 'micro-cors';\nconst cors = Cors({\n  allowMethods: ['GET', 'HEAD']\n});\n\nconst handler = (req, res) => {\n  const {\n    author\n  } = req.query;\n  let quotes = allQuotes;\n  console.log(req.query);\n\n  if (author) {\n    quotes = quotes.filter(quote => quote.author.toLowerCase().includes(author.toLowerCase()));\n  }\n\n  if (!quotes.length) {\n    //enviamos un elemento aleatorio\n    quotes = allQuotes.filter(quote => quote.author.toLowerCase() === 'unknown');\n  }\n\n  const quote = quotes[Math.floor(Math.random() * quotes.length)];\n  res.status(200).json(quote);\n};\n\nexport default cors(handler);","map":{"version":3,"sources":["/home/mike/Desktop/nextjs-test/pages/api/randomQuote.js"],"names":["allQuotes","Cors","cors","allowMethods","handler","req","res","author","query","quotes","console","log","filter","quote","toLowerCase","includes","length","Math","floor","random","status","json"],"mappings":"AAAA,OAAOA,SAAP,MAAsB,mBAAtB;AACA,OAAOC,IAAP,MAAiB,YAAjB;AAEA,MAAMC,IAAI,GAAGD,IAAI,CAAC;AAChBE,EAAAA,YAAY,EAAE,CAAC,KAAD,EAAQ,MAAR;AADE,CAAD,CAAjB;;AAIA,MAAMC,OAAO,GAAG,CAACC,GAAD,EAAMC,GAAN,KAAc;AAE5B,QAAM;AAAEC,IAAAA;AAAF,MAAaF,GAAG,CAACG,KAAvB;AACA,MAAIC,MAAM,GAAGT,SAAb;AACAU,EAAAA,OAAO,CAACC,GAAR,CAAYN,GAAG,CAACG,KAAhB;;AAEA,MAAGD,MAAH,EAAW;AACTE,IAAAA,MAAM,GAAGA,MAAM,CAACG,MAAP,CAAcC,KAAK,IAAIA,KAAK,CAACN,MAAN,CAAaO,WAAb,GAA2BC,QAA3B,CAAoCR,MAAM,CAACO,WAAP,EAApC,CAAvB,CAAT;AACD;;AAED,MAAG,CAACL,MAAM,CAACO,MAAX,EAAmB;AACjB;AACAP,IAAAA,MAAM,GAAGT,SAAS,CAACY,MAAV,CAAiBC,KAAK,IAAIA,KAAK,CAACN,MAAN,CAAaO,WAAb,OAA+B,SAAzD,CAAT;AACD;;AAED,QAAMD,KAAK,GAAGJ,MAAM,CAACQ,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgBV,MAAM,CAACO,MAAlC,CAAD,CAApB;AAEAV,EAAAA,GAAG,CAACc,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBR,KAArB;AACD,CAlBD;;AAoBA,eAAeX,IAAI,CAACE,OAAD,CAAnB","sourcesContent":["import allQuotes from '../../quotes.json';\nimport Cors from 'micro-cors';\n\nconst cors = Cors({\n  allowMethods: ['GET', 'HEAD'],\n});\n\nconst handler = (req, res) => {\n\n  const { author } = req.query;\n  let quotes = allQuotes;\n  console.log(req.query);\n\n  if(author) {\n    quotes = quotes.filter(quote => quote.author.toLowerCase().includes(author.toLowerCase()));\n  }\n\n  if(!quotes.length) {\n    //enviamos un elemento aleatorio\n    quotes = allQuotes.filter(quote => quote.author.toLowerCase() === 'unknown');\n  }\n\n  const quote = quotes[Math.floor(Math.random() * quotes.length)];\n\n  res.status(200).json(quote);\n};\n\nexport default cors(handler);"]},"metadata":{},"sourceType":"module"}