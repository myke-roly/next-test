{"ast":null,"code":"var _jsxFileName = \"/home/mike/Desktop/learning/nextjs-test/pages/custom-server.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { useState, useEffect } from 'react';\nimport Layout from '../components/MyLayout';\nimport Head from 'next/head';\nimport fetch from 'isomorphic-unfetch';\nimport axios from 'axios';\n\nconst CustomServer = ({\n  posts\n}) => {\n  console.log(process.env.MONGO_URL);\n  const {\n    0: state,\n    1: setState\n  } = useState({\n    name: '',\n    email: '',\n    msg: ''\n  });\n  const {\n    0: data,\n    1: setData\n  } = useState([]);\n  useEffect(() => {\n    const getUsers = async () => {\n      const url = `${process.env.URL}/api/auth`;\n      const response = await fetch('/api/auth');\n      const users = await response.json();\n      if (response.status === 200) setData(users);\n    };\n\n    getUsers();\n\n    if (state.msg) {\n      setTimeout(() => {\n        setState({\n          msg: ''\n        });\n      }, 3000);\n    }\n  }, [state.msg]);\n\n  const fetchData = async () => {\n    const {\n      name,\n      email\n    } = state;\n    if (!state.name || !state.email) return;\n    const response = await axios.post('/api/auth', {\n      name,\n      email\n    });\n    setState({\n      msg: response.data.message\n    });\n  };\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    fetchData();\n    setState({\n      name: '',\n      email: ''\n    });\n  }\n\n  function handleChange(e) {\n    setState(_objectSpread({}, state, {\n      [e.target.name]: e.target.value\n    }));\n  }\n\n  return __jsx(React.Fragment, null, __jsx(Head, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }\n  }, __jsx(\"title\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 9\n    }\n  }, \"Custom server\"), __jsx(\"meta\", {\n    name: \"description\",\n    content: \"this is a tv route\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }\n  })), __jsx(Layout, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }\n  }, __jsx(\"main\", {\n    className: \"jsx-874386899\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 11\n    }\n  }, __jsx(\"h1\", {\n    className: \"jsx-874386899\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }\n  }, posts.title), __jsx(\"form\", {\n    onSubmit: handleSubmit,\n    className: \"jsx-874386899\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }\n  }, __jsx(\"h2\", {\n    className: \"jsx-874386899\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 15\n    }\n  }, \"User List\"), state.msg && __jsx(\"p\", {\n    className: \"jsx-874386899\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 29\n    }\n  }, state.msg), __jsx(\"label\", {\n    htmlFor: \"name\",\n    className: \"jsx-874386899\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 15\n    }\n  }, \"Name: \"), __jsx(\"input\", {\n    type: \"text\",\n    id: \"name\",\n    name: \"name\",\n    value: state.name,\n    onChange: handleChange,\n    placeholder: \"No ingresar datos validos ahre!!\",\n    className: \"jsx-874386899\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 15\n    }\n  }), __jsx(\"label\", {\n    htmlFor: \"email\",\n    className: \"jsx-874386899\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 15\n    }\n  }, \"Email: \"), __jsx(\"input\", {\n    type: \"email\",\n    id: \"email\",\n    name: \"email\",\n    value: state.email,\n    onChange: handleChange,\n    className: \"jsx-874386899\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 15\n    }\n  }), __jsx(\"button\", {\n    type: \"submit\",\n    className: \"jsx-874386899\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 15\n    }\n  }, \"Save data\")), __jsx(\"table\", {\n    border: \"1\",\n    className: \"jsx-874386899\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }\n  }, __jsx(\"thead\", {\n    className: \"jsx-874386899\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 15\n    }\n  }, __jsx(\"tr\", {\n    className: \"jsx-874386899\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 17\n    }\n  }, __jsx(\"th\", {\n    className: \"jsx-874386899\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 19\n    }\n  }, \"USERS\"), __jsx(\"th\", {\n    className: \"jsx-874386899\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 19\n    }\n  }, \"@\"))), __jsx(\"tbody\", {\n    className: \"jsx-874386899\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 15\n    }\n  }, data && data.map(user => __jsx(\"tr\", {\n    key: user._id,\n    className: \"jsx-874386899\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 19\n    }\n  }, __jsx(\"td\", {\n    className: \"jsx-874386899\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 21\n    }\n  }, user.name), __jsx(\"td\", {\n    className: \"jsx-874386899\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 21\n    }\n  }, user.email)))))), __jsx(_JSXStyle, {\n    id: \"874386899\",\n    __self: this\n  }, \"main.jsx-874386899{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;font-family:sans-serif;}@media (max-width:720px){main.jsx-874386899{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}}h2.jsx-874386899{color:#555;margin-bottom:1rem;}table.jsx-874386899,form.jsx-874386899{width:100%;margin:2rem auto;background:#000;padding:2rem;border:none;border-radius:5px;}thead.jsx-874386899{background:#222;color:#fff;}tbody.jsx-874386899{background:#dedede;color:#333;}th.jsx-874386899,td.jsx-874386899{border-radius:2px;padding:0.5rem 1rem;border:none;box-shadow:0 0 7px rgba(0,0,0,0.3);}form.jsx-874386899{width:100%;margin:2rem auto;background:#dedede;padding:2rem;}input.jsx-874386899{width:100%;padding:0.7rem 1rem;border:none;border-radius:5px;margin:0.5rem 0;}p.jsx-874386899{color:green;text-transform:uppercase;font-size:1rem;margin:.5rem;text-align:center;}button.jsx-874386899{padding:0.7rem 1rem;background:black;border:none;color:white;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL21pa2UvRGVza3RvcC9sZWFybmluZy9uZXh0anMtdGVzdC9wYWdlcy9jdXN0b20tc2VydmVyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQXFHYSxBQUc4QixBQUtXLEFBSWIsQUFLQSxBQVFLLEFBSUcsQUFLRCxBQU1QLEFBTUEsQUFPQyxBQU9RLFdBL0NELEFBS0YsQUF1QkEsQUFNRyxDQU9LLElBNUJkLEVBU1MsQ0FMVCxDQStCTSxPQWxDbkIsQ0FSa0IsQUF1QkcsRUE1QnJCLEFBaUJBLENBaUJjLE1BT0csQUFPSCxDQTFCQSxLQWFNLENBN0JMLEdBdUJBLEVBb0JELENBMUIwQixFQW1CekIsS0FuQ0QsR0F1QmQsQ0FNa0IsQUFjbEIsSUFQb0IsSUFuQ0EsS0FsQkssR0ErQ3pCLENBMUNFLEtBaURGLEVBcEJBLEVBZkEsVUFsQkEiLCJmaWxlIjoiL2hvbWUvbWlrZS9EZXNrdG9wL2xlYXJuaW5nL25leHRqcy10ZXN0L3BhZ2VzL2N1c3RvbS1zZXJ2ZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IExheW91dCBmcm9tICcuLi9jb21wb25lbnRzL015TGF5b3V0JztcbmltcG9ydCBIZWFkIGZyb20gJ25leHQvaGVhZCc7XG5pbXBvcnQgZmV0Y2ggZnJvbSAnaXNvbW9ycGhpYy11bmZldGNoJztcbmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7XG5cbmNvbnN0IEN1c3RvbVNlcnZlciA9ICh7IHBvc3RzIH0pID0+IHtcblxuICBjb25zb2xlLmxvZyhwcm9jZXNzLmVudi5NT05HT19VUkwpO1xuXG4gIGNvbnN0IFtzdGF0ZSwgc2V0U3RhdGVdID0gdXNlU3RhdGUoe1xuICAgIG5hbWU6ICcnLFxuICAgIGVtYWlsOiAnJyxcbiAgICBtc2c6ICcnXG4gIH0pO1xuXG4gIGNvbnN0IFsgZGF0YSwgc2V0RGF0YSBdID0gdXNlU3RhdGUoW10pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgZ2V0VXNlcnMgPSBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB1cmwgPSBgJHtwcm9jZXNzLmVudi5VUkx9L2FwaS9hdXRoYDtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJy9hcGkvYXV0aCcpO1xuICAgICAgY29uc3QgdXNlcnMgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICBpZihyZXNwb25zZS5zdGF0dXMgPT09IDIwMCkgc2V0RGF0YSh1c2Vycyk7XG4gICAgfVxuXG4gICAgZ2V0VXNlcnMoKTtcblxuICAgIGlmIChzdGF0ZS5tc2cpIHtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBzZXRTdGF0ZSh7IG1zZzogJyd9KTtcbiAgICAgIH0sIDMwMDApO1xuICAgIH1cbiAgfSwgW3N0YXRlLm1zZ10pO1xuXG4gIGNvbnN0IGZldGNoRGF0YSA9IGFzeW5jICgpID0+IHtcbiAgICBjb25zdCB7IG5hbWUsIGVtYWlsIH0gPSBzdGF0ZTtcbiAgICBpZighc3RhdGUubmFtZSB8fCAhc3RhdGUuZW1haWwgKSByZXR1cm47XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5wb3N0KCcvYXBpL2F1dGgnLCB7IG5hbWUsIGVtYWlsIH0pO1xuICAgIHNldFN0YXRlKHsgbXNnOiByZXNwb25zZS5kYXRhLm1lc3NhZ2V9KTtcbiAgfTtcblxuICBmdW5jdGlvbiBoYW5kbGVTdWJtaXQoZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBmZXRjaERhdGEoKTtcbiAgICBzZXRTdGF0ZSh7IG5hbWU6ICcnLCBlbWFpbDogJyd9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGhhbmRsZUNoYW5nZShlKSB7XG4gICAgc2V0U3RhdGUoey4uLnN0YXRlLCBbZS50YXJnZXQubmFtZV06IGUudGFyZ2V0LnZhbHVlIH0pO1xuICB9XG5cbiAgcmV0dXJuIChcbiAgICA8PlxuICAgICAgPEhlYWQ+XG4gICAgICAgIDx0aXRsZT5DdXN0b20gc2VydmVyPC90aXRsZT5cbiAgICAgICAgPG1ldGEgbmFtZT1cImRlc2NyaXB0aW9uXCIgY29udGVudD1cInRoaXMgaXMgYSB0diByb3V0ZVwiIC8+XG4gICAgICA8L0hlYWQ+XG4gICAgICA8TGF5b3V0PlxuICAgICAgICAgIDxtYWluPlxuICAgICAgICAgICAgPGgxPntwb3N0cy50aXRsZX08L2gxPlxuICAgICAgICAgICAgPGZvcm0gb25TdWJtaXQ9e2hhbmRsZVN1Ym1pdH0+XG4gICAgICAgICAgICAgIDxoMj5Vc2VyIExpc3Q8L2gyPiAgXG4gICAgICAgICAgICAgIHtzdGF0ZS5tc2cgJiYgPHA+e3N0YXRlLm1zZ308L3A+fVxuICAgICAgICAgICAgICA8bGFiZWwgaHRtbEZvcj1cIm5hbWVcIj5OYW1lOiA8L2xhYmVsPlxuICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgICAgICAgaWQ9XCJuYW1lXCJcbiAgICAgICAgICAgICAgICBuYW1lPVwibmFtZVwiXG4gICAgICAgICAgICAgICAgdmFsdWU9e3N0YXRlLm5hbWV9XG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9e2hhbmRsZUNoYW5nZX1cbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIk5vIGluZ3Jlc2FyIGRhdG9zIHZhbGlkb3MgYWhyZSEhXCJcbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPGxhYmVsIGh0bWxGb3I9XCJlbWFpbFwiPkVtYWlsOiA8L2xhYmVsPlxuICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICB0eXBlPVwiZW1haWxcIlxuICAgICAgICAgICAgICAgIGlkPVwiZW1haWxcIlxuICAgICAgICAgICAgICAgIG5hbWU9XCJlbWFpbFwiXG4gICAgICAgICAgICAgICAgdmFsdWU9e3N0YXRlLmVtYWlsfVxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVDaGFuZ2V9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cInN1Ym1pdFwiPlNhdmUgZGF0YTwvYnV0dG9uPlxuICAgICAgICAgICAgPC9mb3JtPlxuICAgICAgICAgICAgPHRhYmxlIGJvcmRlcj1cIjFcIj5cbiAgICAgICAgICAgICAgPHRoZWFkPlxuICAgICAgICAgICAgICAgIDx0cj5cbiAgICAgICAgICAgICAgICAgIDx0aD5VU0VSUzwvdGg+XG4gICAgICAgICAgICAgICAgICA8dGg+QDwvdGg+XG4gICAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgICAgPC90aGVhZD5cbiAgICAgICAgICAgICAgPHRib2R5PlxuICAgICAgICAgICAgICAgIHtkYXRhICYmIGRhdGEubWFwKCh1c2VyKSA9PiAoXG4gICAgICAgICAgICAgICAgICA8dHIga2V5PXt1c2VyLl9pZH0+XG4gICAgICAgICAgICAgICAgICAgIDx0ZD57dXNlci5uYW1lfTwvdGQ+XG4gICAgICAgICAgICAgICAgICAgIDx0ZD57dXNlci5lbWFpbH08L3RkPlxuICAgICAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgPC90Ym9keT5cbiAgICAgICAgICAgIDwvdGFibGU+XG4gICAgICAgICAgPC9tYWluPlxuICAgICAgICAgIDxzdHlsZSBqc3g+XG4gICAgICAgICAgICB7YFxuICAgICAgICAgICAgICBtYWluIHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgIGZvbnQtZmFtaWx5OiBzYW5zLXNlcmlmO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIEBtZWRpYSAobWF4LXdpZHRoOiA3MjBweCkge1xuICAgICAgICAgICAgICAgIG1haW4ge1xuICAgICAgICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaDIge1xuICAgICAgICAgICAgICAgIGNvbG9yOiAjNTU1OyBcbiAgICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxcmVtO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHRhYmxlLFxuICAgICAgICAgICAgICBmb3JtIHtcbiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgICAgICBtYXJnaW46IDJyZW0gYXV0bztcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAjMDAwO1xuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDJyZW07XG4gICAgICAgICAgICAgICAgYm9yZGVyOiBub25lO1xuICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDVweDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB0aGVhZCB7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZDogIzIyMjtcbiAgICAgICAgICAgICAgICBjb2xvcjogI2ZmZjtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB0Ym9keSB7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZDogI2RlZGVkZTtcbiAgICAgICAgICAgICAgICBjb2xvcjogIzMzMztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB0aCxcbiAgICAgICAgICAgICAgdGQge1xuICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDJweDtcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiAwLjVyZW0gMXJlbTtcbiAgICAgICAgICAgICAgICBib3JkZXI6IG5vbmU7XG4gICAgICAgICAgICAgICAgYm94LXNoYWRvdzogMCAwIDdweCByZ2JhKDAsIDAsIDAsIDAuMyk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZm9ybSB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICAgICAgbWFyZ2luOiAycmVtIGF1dG87XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZDogI2RlZGVkZTtcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiAycmVtO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlucHV0IHtcbiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiAwLjdyZW0gMXJlbTtcbiAgICAgICAgICAgICAgICBib3JkZXI6IG5vbmU7XG4gICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNXB4O1xuICAgICAgICAgICAgICAgIG1hcmdpbjogMC41cmVtIDA7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgcCB7XG4gICAgICAgICAgICAgICAgY29sb3I6IGdyZWVuO1xuICAgICAgICAgICAgICAgIHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7XG4gICAgICAgICAgICAgICAgZm9udC1zaXplOiAxcmVtO1xuICAgICAgICAgICAgICAgIG1hcmdpbjogLjVyZW07XG4gICAgICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGJ1dHRvbiB7XG4gICAgICAgICAgICAgICAgcGFkZGluZzogMC43cmVtIDFyZW07XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZDogYmxhY2s7XG4gICAgICAgICAgICAgICAgYm9yZGVyOiBub25lO1xuICAgICAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgYH1cbiAgICAgICAgICA8L3N0eWxlPlxuICAgICAgPC9MYXlvdXQ+XG4gICAgPC8+XG4gICk7XG59O1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0U2VydmVyU2lkZVByb3BzKCBjdHggKSB7XG4gIGNvbnN0IHVybCA9IGAke3Byb2Nlc3MuZW52LlVSTH0vYXBpL2F1dGhgO1xuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGBodHRwczovL2pzb25wbGFjZWhvbGRlci50eXBpY29kZS5jb20vdG9kb3MvNWApO1xuICBjb25zdCBwb3N0cyA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgcmV0dXJuIHsgcHJvcHMgOiB7XG4gICAgcG9zdHNcbiAgfSB9O1xuXG59XG5cbmV4cG9ydCBkZWZhdWx0IEN1c3RvbVNlcnZlcjtcbiJdfQ== */\\n/*@ sourceURL=/home/mike/Desktop/learning/nextjs-test/pages/custom-server.js */\")));\n};\n\nexport async function getServerSideProps(ctx) {\n  const url = `${process.env.URL}/api/auth`;\n  const response = await fetch(`https://jsonplaceholder.typicode.com/todos/5`);\n  const posts = await response.json();\n  return {\n    props: {\n      posts\n    }\n  };\n}\nexport default CustomServer;","map":{"version":3,"sources":["/home/mike/Desktop/learning/nextjs-test/pages/custom-server.js"],"names":["useState","useEffect","Layout","Head","fetch","axios","CustomServer","posts","console","log","process","env","MONGO_URL","state","setState","name","email","msg","data","setData","getUsers","url","URL","response","users","json","status","setTimeout","fetchData","post","message","handleSubmit","e","preventDefault","handleChange","target","value","title","map","user","_id","getServerSideProps","ctx","props"],"mappings":"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","sourcesContent":["import { useState, useEffect } from 'react';\nimport Layout from '../components/MyLayout';\nimport Head from 'next/head';\nimport fetch from 'isomorphic-unfetch';\nimport axios from 'axios';\n\nconst CustomServer = ({ posts }) => {\n\n  console.log(process.env.MONGO_URL);\n\n  const [state, setState] = useState({\n    name: '',\n    email: '',\n    msg: ''\n  });\n\n  const [ data, setData ] = useState([]);\n\n  useEffect(() => {\n    const getUsers = async () => {\n      const url = `${process.env.URL}/api/auth`;\n      const response = await fetch('/api/auth');\n      const users = await response.json();\n      if(response.status === 200) setData(users);\n    }\n\n    getUsers();\n\n    if (state.msg) {\n      setTimeout(() => {\n        setState({ msg: ''});\n      }, 3000);\n    }\n  }, [state.msg]);\n\n  const fetchData = async () => {\n    const { name, email } = state;\n    if(!state.name || !state.email ) return;\n    const response = await axios.post('/api/auth', { name, email });\n    setState({ msg: response.data.message});\n  };\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    fetchData();\n    setState({ name: '', email: ''});\n  }\n\n  function handleChange(e) {\n    setState({...state, [e.target.name]: e.target.value });\n  }\n\n  return (\n    <>\n      <Head>\n        <title>Custom server</title>\n        <meta name=\"description\" content=\"this is a tv route\" />\n      </Head>\n      <Layout>\n          <main>\n            <h1>{posts.title}</h1>\n            <form onSubmit={handleSubmit}>\n              <h2>User List</h2>  \n              {state.msg && <p>{state.msg}</p>}\n              <label htmlFor=\"name\">Name: </label>\n              <input\n                type=\"text\"\n                id=\"name\"\n                name=\"name\"\n                value={state.name}\n                onChange={handleChange}\n                placeholder=\"No ingresar datos validos ahre!!\"\n              />\n              <label htmlFor=\"email\">Email: </label>\n              <input\n                type=\"email\"\n                id=\"email\"\n                name=\"email\"\n                value={state.email}\n                onChange={handleChange}\n              />\n              <button type=\"submit\">Save data</button>\n            </form>\n            <table border=\"1\">\n              <thead>\n                <tr>\n                  <th>USERS</th>\n                  <th>@</th>\n                </tr>\n              </thead>\n              <tbody>\n                {data && data.map((user) => (\n                  <tr key={user._id}>\n                    <td>{user.name}</td>\n                    <td>{user.email}</td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </main>\n          <style jsx>\n            {`\n              main {\n                display: flex;\n                font-family: sans-serif;\n              }\n              @media (max-width: 720px) {\n                main {\n                  flex-direction: column;\n                }\n              }\n              h2 {\n                color: #555; \n                margin-bottom: 1rem;\n              }\n              table,\n              form {\n                width: 100%;\n                margin: 2rem auto;\n                background: #000;\n                padding: 2rem;\n                border: none;\n                border-radius: 5px;\n              }\n              thead {\n                background: #222;\n                color: #fff;\n              }\n              tbody {\n                background: #dedede;\n                color: #333;\n              }\n              th,\n              td {\n                border-radius: 2px;\n                padding: 0.5rem 1rem;\n                border: none;\n                box-shadow: 0 0 7px rgba(0, 0, 0, 0.3);\n              }\n              form {\n                width: 100%;\n                margin: 2rem auto;\n                background: #dedede;\n                padding: 2rem;\n              }\n              input {\n                width: 100%;\n                padding: 0.7rem 1rem;\n                border: none;\n                border-radius: 5px;\n                margin: 0.5rem 0;\n              }\n              p {\n                color: green;\n                text-transform: uppercase;\n                font-size: 1rem;\n                margin: .5rem;\n                text-align: center;\n              }\n              button {\n                padding: 0.7rem 1rem;\n                background: black;\n                border: none;\n                color: white;\n              }\n            `}\n          </style>\n      </Layout>\n    </>\n  );\n};\n\nexport async function getServerSideProps( ctx ) {\n  const url = `${process.env.URL}/api/auth`;\n  const response = await fetch(`https://jsonplaceholder.typicode.com/todos/5`);\n  const posts = await response.json();\n  return { props : {\n    posts\n  } };\n\n}\n\nexport default CustomServer;\n"]},"metadata":{},"sourceType":"module"}